!function(o){function a(){e=!0}function t(a){setTimeout(function(){e=!1,a&&a()},200)}var n=o("#search-form-wrap"),e=!1,i=(o(".nav-search-btn").on("click",function(){e||(a(),n.addClass("on"),t(function(){o(".search-form-input").focus()}))}),o(".search-form-input").on("blur",function(){a(),n.removeClass("on"),t()}),o("body").on("click",function(){o(".article-share-box.on").removeClass("on")}).on("click",".article-share-link",function(a){a.stopPropagation();var a=o(this),t=a.attr("data-url"),n=encodeURIComponent(t),e="article-share-box-"+a.attr("data-id"),i=a.attr("data-title"),a=a.offset();if(o("#"+e).length){if((s=o("#"+e)).hasClass("on"))return void s.removeClass("on")}else{var e=['<div id="'+e+'" class="article-share-box">','<input class="article-share-input" value="'+t+'">','<div class="article-share-links">','<a href="https://twitter.com/intent/tweet?text='+encodeURIComponent(i)+"&url="+n+'" class="article-share-twitter" target="_blank" title="Twitter"><span class="fa fa-twitter"></span></a>','<a href="https://www.facebook.com/sharer.php?u='+n+'" class="article-share-facebook" target="_blank" title="Facebook"><span class="fa fa-facebook"></span></a>','<a href="http://pinterest.com/pin/create/button/?url='+n+'" class="article-share-pinterest" target="_blank" title="Pinterest"><span class="fa fa-pinterest"></span></a>','<a href="https://www.linkedin.com/shareArticle?mini=true&url='+n+'" class="article-share-linkedin" target="_blank" title="LinkedIn"><span class="fa fa-linkedin"></span></a>',"</div>","</div>"].join(""),s=o(e);o("body").append(s)}o(".article-share-box.on").hide(),s.css({top:a.top+25,left:a.left}).addClass("on")}).on("click",".article-share-box",function(a){a.stopPropagation()}).on("click",".article-share-box-input",function(){o(this).select()}).on("click",".article-share-box-link",function(a){a.preventDefault(),a.stopPropagation(),window.open(this.href,"article-share-box-window-"+Date.now(),"width=500,height=450")}),o(".article-entry").each(function(a){o(this).find("img").each(function(){var a;o(this).parent().hasClass("fancybox")||o(this).parent().is("a")||((a=this.alt)&&o(this).after('<span class="caption">'+a+"</span>"),o(this).wrap('<a href="'+this.src+'" data-fancybox="gallery" data-caption="'+a+'"></a>'))}),o(this).find(".fancybox").each(function(){o(this).attr("rel","article"+a)})}),o.fancybox&&o(".fancybox").fancybox(),o("#container")),s=!1;o("#main-nav-toggle").on("click",function(){s||(s=!0,i.toggleClass("mobile-nav-on"),setTimeout(function(){s=!1},200))}),o("#wrap").on("click",function(){!s&&i.hasClass("mobile-nav-on")&&i.removeClass("mobile-nav-on")})}(jQuery);