<!DOCTYPE html><html lang="zh-CN"><head><meta charset="utf-8"><meta name="viewport" content="width=device-width,initial-scale=1,maximum-scale=1"><meta name="keywords" content="vue react javascript nodejs"><meta name="description" content="vue react javascript nodejs"><meta name="author" content="gml"><title>ä»€ä¹ˆæ˜¯vue3 | è¿œæ–¹çš„åšå®¢</title><link rel="stylesheet" href="/blog/css/style.css"><link rel="shortcut icon" href="/blog/images/logo.svg"><link rel="stylesheet" href="/blog/font/css/fontawesome.min.css"><link rel="stylesheet" href="/blog/font/css/regular.min.css"><link rel="stylesheet" href="/blog/font/css/solid.min.css"><link rel="stylesheet" href="/blog/font/css/brands.min.css"><link rel="stylesheet" href="/blog/css/custom-1.css"><script class="keep-theme-configurations">const KEEP=window.KEEP||{};KEEP.hexo_config={hostname:"geminglu.github.io",root:"/blog/",language:"zh-CN",path:"search.xml"},KEEP.theme_config={base_info:{title:"è¿œæ–¹çš„åšå®¢",author:"gml",primary_color:"#0072cc",avatar:"/images/avatar.svg",logo:"/images/logo.svg",favicon:"/images/logo.svg"},menu:{Home:"/ || fa-solid fa-house",Archives:"/archives || fa-solid fa-box-archive",Tags:"/tags || fa-solid fa-tags",Categories:"/categories || fa-solid fa-layer-group"},first_screen:{enable:!0,header_transparent:!0,background_img:"/images/bg.svg",description:"ä¸å¿˜åˆå¿ƒ",hitokoto:!0},social_contact:{enable:!0,links:{github:"https://github.com/geminglu",weixin:"img | /images/IMG_2778.JPG",zhihu:"https://www.zhihu.com/people/ge-ming-lu",twitter:null,facebook:"https://www.facebook.com/ge.minglu.1996/",email:"geminglu199698@outlook.com"}},scroll:{progress_bar:!1,percent:!0},home:{announcement:null,category:!1,tag:!1,post_datetime:"updated"},post:{author_label:{enable:!1,auto:!0,custom_label_list:["Trainee","Engineer","Architect"]},word_count:{wordcount:!0,min2read:!0},datetime_format:"YYYY-MM-DD",copyright_info:!0,share:!0,reward:{enable:!0,img_link:"/images/IMG_2781.PNG",text:"è¯·ä½œè€…å’Œå¥¶èŒ¶ğŸ¥¤"}},code_block:{tools:{enable:!0,style:"default"},highlight_theme:"default"},toc:{enable:!0,number:!0,expand_all:!0,init_open:!0,layout:"right"},website_count:{busuanzi_count:{enable:!0,site_uv:!0,site_pv:!0,page_pv:!0}},local_search:{enable:!0,preload:!0},comment:{enable:"fasle",use:"valine",valine:{appid:null,appkey:null,server_urls:null,placeholder:null},gitalk:{github_id:null,github_admins:null,repository:null,client_id:null,client_secret:null,proxy:null},twikoo:{env_id:null,region:null,version:"1.6.21"},waline:{server_url:null,reaction:!1,version:2},giscus:{repo:null,repo_id:null,category:"Announcements",category_id:null,reactions_enabled:!1}},rss:{enable:!0},lazyload:{enable:!0},cdn:{enable:!1,provider:"jsdelivr"},pjax:{enable:!0},footer:{since:2020,word_count:!1,icp:{enable:!1,record_code:null,url:"https://beian.miit.gov.cn"},site_deploy:{enable:!1,provider:"github",url:null},shields_style:{enable:!1,custom:[{link_url:null,img_url:null}]}},inject:{enable:!0,css:[["/css/custom-1.css"]],js:[["/js/tongji.js"]]},root:"/blog",home_article:{category:{enable:!0,limit:3},tag:{enable:!0,limit:5}},source_data:{},version:"4.1.1"},KEEP.language_ago={second:"%s ç§’å‰",minute:"%s åˆ†é’Ÿå‰",hour:"%s å°æ—¶å‰",day:"%s å¤©å‰",week:"%s å‘¨å‰",month:"%s ä¸ªæœˆå‰",year:"%s å¹´å‰"},KEEP.language_code_block={copy:"å¤åˆ¶ä»£ç ",copied:"å·²å¤åˆ¶",fold:"æŠ˜å ä»£ç å—",folded:"å·²æŠ˜å "},KEEP.language_copy_copyright={copy:"å¤åˆ¶ç‰ˆæƒä¿¡æ¯",copied:"å·²å¤åˆ¶",title:"åŸæ–‡æ ‡é¢˜",author:"åŸæ–‡ä½œè€…",link:"åŸæ–‡é“¾æ¥"}</script><meta name="generator" content="Hexo 7.1.1"><link rel="alternate" href="/blog/atom.xml" title="è¿œæ–¹çš„åšå®¢" type="application/atom+xml">
</head><body><div class="progress-bar-container"><span class="pjax-progress-bar"></span> <i class="pjax-progress-icon fas fa-circle-notch fa-spin"></i></div><main class="page-container border-box"><div class="page-main-content border-box"><div class="page-main-content-top"><header class="header-wrapper"><div class="border-box header-content"><div class="left border-box"><a class="logo-image border-box" href="/blog/"><img src="/blog/images/logo.svg"> </a><a class="site-name border-box" href="/blog/">è¿œæ–¹çš„åšå®¢</a></div><div class="right border-box"><div class="pc"><ul class="menu-list"><li class="menu-item"><a href="/blog/"><i class="menu-icon fa-solid fa-house"></i> é¦–é¡µ</a></li><li class="menu-item"><a href="/blog/archives"><i class="menu-icon fa-solid fa-box-archive"></i> å½’æ¡£</a></li><li class="menu-item"><a href="/blog/tags"><i class="menu-icon fa-solid fa-tags"></i> æ ‡ç­¾</a></li><li class="menu-item"><a href="/blog/categories"><i class="menu-icon fa-solid fa-layer-group"></i> åˆ†ç±»</a></li><li class="menu-item search search-popup-trigger"><i class="fas search fa-search"></i></li></ul></div><div class="mobile"><div class="icon-item search search-popup-trigger"><i class="fas fa-search"></i></div><div class="icon-item menu-bar"><div class="menu-bar-middle"></div></div></div></div></div><div class="header-drawer"><ul class="drawer-menu-list"><li class="drawer-menu-item flex-center"><a href="/blog/">é¦–é¡µ</a></li><li class="drawer-menu-item flex-center"><a href="/blog/archives">å½’æ¡£</a></li><li class="drawer-menu-item flex-center"><a href="/blog/tags">æ ‡ç­¾</a></li><li class="drawer-menu-item flex-center"><a href="/blog/categories">åˆ†ç±»</a></li></ul></div><div class="window-mask"></div></header></div><div class="page-main-content-middle border-box"><div class="main-content border-box"><div class="fade-in-down-animation"><div class="post-page-container border-box"><div class="post-content-container border-box"><div class="post-content-bottom border-box"><div class="post-title">ä»€ä¹ˆæ˜¯vue3</div><div class="post-header border-box"><div class="avatar-box border-box"><img src="/blog/images/avatar.svg"></div><div class="info-box"><div class="author border-box"><span class="name">gml</span></div><div class="meta-info border-box"><div class="post-meta-info-container border-box post"><div class="post-meta-info border-box"><span class="meta-info-item post-create-date"><i class="icon fa-solid fa-calendar-plus"></i>&nbsp; <span class="datetime">2023-09-29</span> </span><span class="meta-info-item post-update-date"><i class="icon fa-solid fa-file-pen"></i>&nbsp; <span class="datetime" data-updated="Tue Apr 16 2024 09:24:28 GMT+0000">2024-04-16</span> </span><span class="meta-info-item post-category border-box"><i class="icon fas fa-folder"></i>&nbsp;<ul class="post-category-ul"><li class="category-item"><a href="/blog/categories/vue3/">vue3</a></li></ul></span><span class="post-tag meta-info-item border-box"><ul class="post-tag-ul"><li class="tag-item"><span class="tag-separator"><i class="icon fas fa-hashtag"></i></span><a href="/blog/tags/%E5%89%8D%E7%AB%AF/">å‰ç«¯</a></li><li class="tag-item"><span class="tag-separator"><i class="icon fas fa-hashtag"></i></span><a href="/blog/tags/vue3/">vue3</a></li><li class="tag-item"><span class="tag-separator"><i class="icon fas fa-hashtag"></i></span><a href="/blog/tags/vue/">vue</a></li></ul></span><span class="meta-info-item post-wordcount"><i class="icon fas fa-file-word"></i>&nbsp;<span>5k å­—</span> </span><span class="meta-info-item post-min2read"><i class="icon fas fa-clock"></i>&nbsp;<span>22 åˆ†é’Ÿ</span> </span><span class="meta-info-item post-pv"><i class="icon fas fa-eye"></i>&nbsp;<span id="busuanzi_value_page_pv"></span></span></div></div></div></div></div><div class="post-content keep-markdown-body"><h2 id="1-Vue3-ç®€ä»‹"><a href="#1-Vue3-ç®€ä»‹" class="headerlink" title="1.Vue3 ç®€ä»‹"></a>1.Vue3 ç®€ä»‹</h2><ul><li>2020 å¹´ 9 æœˆ 18 æ—¥ï¼ŒVue.js å‘å¸ƒ 3.0 ç‰ˆæœ¬ï¼Œä»£å·ï¼šOne Pieceï¼ˆæµ·è´¼ç‹ï¼‰</li><li>è€—æ—¶ 2 å¹´å¤šã€<a class="link" target="_blank" rel="noopener" href="https://github.com/vuejs/vue-next/graphs/commit-activity">2600+æ¬¡æäº¤<i class="fas fa-external-link-alt"></i></a>ã€<a class="link" target="_blank" rel="noopener" href="https://github.com/vuejs/rfcs/tree/master/active-rfcs">30+ä¸ª RFC<i class="fas fa-external-link-alt"></i></a>ã€<a class="link" target="_blank" rel="noopener" href="https://github.com/vuejs/vue-next/pulls?q=is:pr+is:merged+-author:app/dependabot-preview+">600+æ¬¡ PR<i class="fas fa-external-link-alt"></i></a>ã€<a class="link" target="_blank" rel="noopener" href="https://github.com/vuejs/vue-next/graphs/contributors">99 ä½è´¡çŒ®è€…<i class="fas fa-external-link-alt"></i></a></li><li>github ä¸Šçš„ tags åœ°å€ï¼š<a class="link" target="_blank" rel="noopener" href="https://github.com/vuejs/vue-next/releases/tag/v3.0.0">https://github.com/vuejs/vue-next/releases/tag/v3.0.0<i class="fas fa-external-link-alt"></i></a></li></ul><h2 id="2-Vue3-å¸¦æ¥äº†ä»€ä¹ˆ"><a href="#2-Vue3-å¸¦æ¥äº†ä»€ä¹ˆ" class="headerlink" title="2.Vue3 å¸¦æ¥äº†ä»€ä¹ˆ"></a>2.Vue3 å¸¦æ¥äº†ä»€ä¹ˆ</h2><h3 id="1-æ€§èƒ½çš„æå‡"><a href="#1-æ€§èƒ½çš„æå‡" class="headerlink" title="1.æ€§èƒ½çš„æå‡"></a>1.æ€§èƒ½çš„æå‡</h3><ul><li>æ‰“åŒ…å¤§å°å‡å°‘ 41%</li><li>åˆæ¬¡æ¸²æŸ“å¿« 55%, æ›´æ–°æ¸²æŸ“å¿« 133%</li><li>å†…å­˜å‡å°‘ 54%<br>â€¦â€¦</li></ul><h3 id="2-æºç çš„å‡çº§"><a href="#2-æºç çš„å‡çº§" class="headerlink" title="2.æºç çš„å‡çº§"></a>2.æºç çš„å‡çº§</h3><ul><li>ä½¿ç”¨ Proxy ä»£æ›¿ defineProperty å®ç°å“åº”å¼</li><li>é‡å†™è™šæ‹Ÿ DOM çš„å®ç°å’Œ Tree-Shaking<br>â€¦â€¦</li></ul><h3 id="3-æ‹¥æŠ±-TypeScript"><a href="#3-æ‹¥æŠ±-TypeScript" class="headerlink" title="3.æ‹¥æŠ± TypeScript"></a>3.æ‹¥æŠ± TypeScript</h3><ul><li>Vue3 å¯ä»¥æ›´å¥½çš„æ”¯æŒ TypeScript</li></ul><h3 id="4-æ–°çš„ç‰¹æ€§"><a href="#4-æ–°çš„ç‰¹æ€§" class="headerlink" title="4.æ–°çš„ç‰¹æ€§"></a>4.æ–°çš„ç‰¹æ€§</h3><ol><li>Composition APIï¼ˆç»„åˆ APIï¼‰</li></ol><ul><li>setup é…ç½®</li><li>ref ä¸ reactive</li><li>watch ä¸ watchEffect</li><li>provide ä¸ inject</li><li>â€¦â€¦</li></ul><ol start="2"><li>æ–°çš„å†…ç½®ç»„ä»¶</li></ol><ul><li>Fragment</li><li>Teleport</li><li>Suspense</li></ul><ol start="3"><li>å…¶ä»–æ”¹å˜</li></ol><ul><li>æ–°çš„ç”Ÿå‘½å‘¨æœŸé’©å­</li><li>data é€‰é¡¹åº”å§‹ç»ˆè¢«å£°æ˜ä¸ºä¸€ä¸ªå‡½æ•°</li><li>ç§»é™¤ keyCode æ”¯æŒä½œä¸º v-on çš„ä¿®é¥°ç¬¦</li><li>â€¦â€¦</li></ul><h3 id="ä¸€ã€åˆ›å»º-Vue3-0-å·¥ç¨‹"><a href="#ä¸€ã€åˆ›å»º-Vue3-0-å·¥ç¨‹" class="headerlink" title="ä¸€ã€åˆ›å»º Vue3.0 å·¥ç¨‹"></a>ä¸€ã€åˆ›å»º Vue3.0 å·¥ç¨‹</h3><h3 id="1-ä½¿ç”¨-vue-cli-åˆ›å»º"><a href="#1-ä½¿ç”¨-vue-cli-åˆ›å»º" class="headerlink" title="1.ä½¿ç”¨ vue-cli åˆ›å»º"></a>1.ä½¿ç”¨ vue-cli åˆ›å»º</h3><p>å®˜æ–¹æ–‡æ¡£ï¼š<a class="link" target="_blank" rel="noopener" href="https://cli.vuejs.org/zh/guide/creating-a-project.html#vue-create">https://cli.vuejs.org/zh/guide/creating-a-project.html#vue-create<i class="fas fa-external-link-alt"></i></a></p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">## æŸ¥çœ‹@vue/cliç‰ˆæœ¬ï¼Œç¡®ä¿@vue/cliç‰ˆæœ¬åœ¨4.5.0ä»¥ä¸Š</span></span><br><span class="line">vue --version</span><br><span class="line"><span class="comment">## å®‰è£…æˆ–è€…å‡çº§ä½ çš„@vue/cli</span></span><br><span class="line">npm install -g @vue/cli</span><br><span class="line"><span class="comment">## åˆ›å»º</span></span><br><span class="line">vue create vue_test</span><br><span class="line"><span class="comment">## å¯åŠ¨</span></span><br><span class="line"><span class="built_in">cd</span> vue_test</span><br><span class="line">npm run serve</span><br></pre></td></tr></table></figure><h3 id="2-ä½¿ç”¨-vite-åˆ›å»º"><a href="#2-ä½¿ç”¨-vite-åˆ›å»º" class="headerlink" title="2.ä½¿ç”¨ vite åˆ›å»º"></a>2.ä½¿ç”¨ vite åˆ›å»º</h3><p>å®˜æ–¹æ–‡æ¡£ï¼š<a class="link" target="_blank" rel="noopener" href="https://v3.cn.vuejs.org/guide/installation.html#vite">https://v3.cn.vuejs.org/guide/installation.html#vite<i class="fas fa-external-link-alt"></i></a></p><p>vite å®˜ç½‘ï¼š<a class="link" target="_blank" rel="noopener" href="https://vitejs.cn/">https://vitejs.cn<i class="fas fa-external-link-alt"></i></a></p><ul><li>ä»€ä¹ˆæ˜¯ viteï¼Ÿâ€”â€” æ–°ä¸€ä»£å‰ç«¯æ„å»ºå·¥å…·ã€‚</li><li>ä¼˜åŠ¿å¦‚ä¸‹ï¼š<ul><li>å¼€å‘ç¯å¢ƒä¸­ï¼Œæ— éœ€æ‰“åŒ…æ“ä½œï¼Œå¯å¿«é€Ÿçš„å†·å¯åŠ¨ã€‚</li><li>è½»é‡å¿«é€Ÿçš„çƒ­é‡è½½ï¼ˆHMRï¼‰ã€‚</li><li>çœŸæ­£çš„æŒ‰éœ€ç¼–è¯‘ï¼Œä¸å†ç­‰å¾…æ•´ä¸ªåº”ç”¨ç¼–è¯‘å®Œæˆã€‚</li></ul></li><li>ä¼ ç»Ÿæ„å»º ä¸ vite æ„å»ºå¯¹æ¯”å›¾</li></ul><p><img lazyload alt="image" data-src="/blog/images/43483607-c6c7-4b93-8d38-09d8d0e7b135.png"></p><p><img lazyload alt="image" data-src="/blog/images/2b9a572c-a88a-4d60-a408-9410e06eb74d.png"></p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">## åˆ›å»ºå·¥ç¨‹</span></span><br><span class="line">npm init vite-app &lt;project-name&gt;</span><br><span class="line"><span class="comment">## è¿›å…¥å·¥ç¨‹ç›®å½•</span></span><br><span class="line"><span class="built_in">cd</span> &lt;project-name&gt;</span><br><span class="line"><span class="comment">## å®‰è£…ä¾èµ–</span></span><br><span class="line">npm install</span><br><span class="line"><span class="comment">## è¿è¡Œ</span></span><br><span class="line">npm run dev</span><br></pre></td></tr></table></figure><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br></pre></td><td class="code"><pre><span class="line">&lt;template&gt;</span><br><span class="line">  &lt;!-- vue3ä¸­æ¨¡æ¿ä¸­å¯ä»¥æ²¡æœ‰æ ¹æ ‡ç­¾ --&gt;</span><br><span class="line">  &lt;!-- &lt;img  alt=&quot;Vue logo&quot;  src=&quot;/blog./assets/logo.png&quot;  &gt;</span><br><span class="line">  &lt;HelloWorld msg=&quot;Welcome to Your Vue.js App&quot; /&gt; --&gt;</span><br><span class="line">  &lt;div&gt;å§“åï¼š&#123;&#123; name &#125;&#125;&lt;/div&gt;</span><br><span class="line">  &lt;div&gt;å¹´é¾„ï¼š&#123;&#123; age &#125;&#125;&lt;/div&gt;</span><br><span class="line">  &lt;div&gt;èŒä¸šï¼š&#123;&#123; job.type &#125;&#125;&lt;/div&gt;</span><br><span class="line">  &lt;div&gt;è–ªèµ„ï¼š&#123;&#123; job.salary &#125;&#125;&lt;/div&gt;</span><br><span class="line">  &lt;div&gt;çˆ±å¥½ï¼š&#123;&#123; hobby &#125;&#125;&lt;/div&gt;</span><br><span class="line">  &lt;button @click=&quot;sayHello&quot;&gt;æŒ‰é’®&lt;/button&gt;</span><br><span class="line">&lt;/template&gt;</span><br><span class="line"></span><br><span class="line">&lt;script&gt;</span><br><span class="line">// import HelloWorld from &quot;./components/HelloWorld.vue&quot;;</span><br><span class="line">import &#123; ref, reactive &#125; from &quot;vue&quot;;</span><br><span class="line"></span><br><span class="line">export default &#123;</span><br><span class="line">  name: &quot;App&quot;,</span><br><span class="line">  // components: &#123;</span><br><span class="line">  //   HelloWorld,</span><br><span class="line">  // &#125;,</span><br><span class="line">  setup() &#123;</span><br><span class="line">    let name = ref(&quot;å¼ ä¸‰&quot;);</span><br><span class="line">    let age = ref(18);</span><br><span class="line">    let job = reactive(&#123;</span><br><span class="line">      type: &quot;å‰ç«¯å¼€å‘å·¥ç¨‹å¸ˆ&quot;,</span><br><span class="line">      salary: &quot;30K&quot;,</span><br><span class="line">    &#125;);</span><br><span class="line">    let hobby = reactive([&quot;æŠ½çƒŸ&quot;, &quot;å–é…’&quot;, &quot;çƒ«å¤´&quot;]);</span><br><span class="line">    function sayHello() &#123;</span><br><span class="line">      name.value = &quot;æå››&quot;;</span><br><span class="line">      age.value = &quot;45&quot;;</span><br><span class="line">      job.type = &quot;UIè®¾è®¡å¸ˆ&quot;;</span><br><span class="line">      job.salary = &quot;10K&quot;;</span><br><span class="line">      hobby[0] = &quot;å”±æ­Œ&quot;;</span><br><span class="line">    &#125;</span><br><span class="line">    return &#123;</span><br><span class="line">      name,</span><br><span class="line">      age,</span><br><span class="line">      job,</span><br><span class="line">      hobby,</span><br><span class="line">      sayHello,</span><br><span class="line">    &#125;;</span><br><span class="line">    // return (q) =&gt; &#123;</span><br><span class="line">    //   console.log(&quot;return&quot;, q, this);</span><br><span class="line">    //   return h(&quot;h1&quot;, &quot;dome&quot;);</span><br><span class="line">    // &#125;;</span><br><span class="line">  &#125;,</span><br><span class="line">&#125;;</span><br><span class="line">&lt;/script&gt;</span><br></pre></td></tr></table></figure><h2 id="å¸¸ç”¨-CompositionAPI"><a href="#å¸¸ç”¨-CompositionAPI" class="headerlink" title="å¸¸ç”¨ CompositionAPI"></a>å¸¸ç”¨ CompositionAPI</h2><p>å®˜æ–¹æ–‡æ¡£: <a class="link" target="_blank" rel="noopener" href="https://v3.cn.vuejs.org/guide/composition-api-introduction.html">https://v3.cn.vuejs.org/guide/composition-api-introduction.html<i class="fas fa-external-link-alt"></i></a></p><h3 id="1-æ‹‰å¼€åºå¹•çš„-setup"><a href="#1-æ‹‰å¼€åºå¹•çš„-setup" class="headerlink" title="1.æ‹‰å¼€åºå¹•çš„ setup"></a>1.æ‹‰å¼€åºå¹•çš„ setup</h3><ol><li>ç†è§£ï¼šVue3.0 ä¸­ä¸€ä¸ªæ–°çš„é…ç½®é¡¹ï¼Œå€¼ä¸ºä¸€ä¸ªå‡½æ•°ã€‚</li><li>setup æ˜¯æ‰€æœ‰ Composition APIï¼ˆç»„åˆ APIï¼‰â€œ è¡¨æ¼”çš„èˆå° â€ã€‚</li><li>ç»„ä»¶ä¸­æ‰€ç”¨åˆ°çš„ï¼šæ•°æ®ã€æ–¹æ³•ç­‰ç­‰ï¼Œå‡è¦é…ç½®åœ¨ setup ä¸­ã€‚</li><li>setup å‡½æ•°çš„ä¸¤ç§è¿”å›å€¼ï¼š<ol><li>è‹¥è¿”å›ä¸€ä¸ªå¯¹è±¡ï¼Œåˆ™å¯¹è±¡ä¸­çš„å±æ€§ã€æ–¹æ³•, åœ¨æ¨¡æ¿ä¸­å‡å¯ä»¥ç›´æ¥ä½¿ç”¨ã€‚ï¼ˆé‡ç‚¹å…³æ³¨ï¼ï¼‰</li><li>è‹¥è¿”å›ä¸€ä¸ªæ¸²æŸ“å‡½æ•°ï¼šåˆ™å¯ä»¥è‡ªå®šä¹‰æ¸²æŸ“å†…å®¹ã€‚ï¼ˆäº†è§£ï¼‰</li></ol></li><li>æ³¨æ„ç‚¹ï¼š<ol><li>å°½é‡ä¸è¦ä¸ Vue2.x é…ç½®æ··ç”¨<ul><li>Vue2.x é…ç½®ï¼ˆdataã€methosã€computedâ€¦ï¼‰ä¸­å¯ä»¥è®¿é—®åˆ° setup ä¸­çš„å±æ€§ã€æ–¹æ³•ã€‚</li><li>ä½†åœ¨ setup ä¸­ä¸èƒ½è®¿é—®åˆ° Vue2.x é…ç½®ï¼ˆdataã€methosã€computedâ€¦ï¼‰ã€‚</li><li>å¦‚æœæœ‰é‡å, setup ä¼˜å…ˆã€‚</li></ul></li><li>setup å¯ä»¥æ˜¯ async å‡½æ•°è¿”å› Promiseï¼Œä½†æ˜¯å¿…é¡»ç»“åˆ Suspense å’Œå¼‚æ­¥ç»„ä»¶ï¼ˆdefineAsyncComponentï¼‰ä¸€èµ·ä½¿ç”¨</li></ol></li></ol><h3 id="2-ref-å‡½æ•°"><a href="#2-ref-å‡½æ•°" class="headerlink" title="2.ref å‡½æ•°"></a>2.ref å‡½æ•°</h3><ul><li>ä½œç”¨: å®šä¹‰ä¸€ä¸ªå“åº”å¼çš„æ•°æ®</li><li>è¯­æ³•: <code>const xxx = ref(initValue)</code><ul><li>åˆ›å»ºä¸€ä¸ªåŒ…å«å“åº”å¼æ•°æ®çš„å¼•ç”¨å¯¹è±¡ï¼ˆreference å¯¹è±¡ï¼Œç®€ç§° ref å¯¹è±¡ï¼‰ã€‚</li><li>JS ä¸­æ“ä½œæ•°æ®ï¼š <code>xxx.value</code></li><li>æ¨¡æ¿ä¸­è¯»å–æ•°æ®: ä¸éœ€è¦.valueï¼Œç›´æ¥ï¼š<code>&lt;div&gt;&#123;&#123;xxx&#125;&#125;&lt;/div&gt;</code></li></ul></li><li>å¤‡æ³¨ï¼š<ul><li>æ¥æ”¶çš„æ•°æ®å¯ä»¥æ˜¯ï¼šåŸºæœ¬ç±»å‹ã€ä¹Ÿå¯ä»¥æ˜¯å¯¹è±¡ç±»å‹ã€‚</li><li>åŸºæœ¬ç±»å‹çš„æ•°æ®ï¼šå“åº”å¼ä¾ç„¶æ˜¯é <code>Object.defineProperty()</code>çš„<code>get</code>ä¸<code>set</code>å®Œæˆçš„ã€‚</li><li>å¯¹è±¡ç±»å‹çš„æ•°æ®ï¼šå†…éƒ¨ â€œ æ±‚åŠ© â€ äº† Vue3.0 ä¸­çš„ä¸€ä¸ªæ–°å‡½æ•°â€”â€” <code>reactive</code>å‡½æ•°ã€‚</li></ul></li></ul><h3 id="3-reactive-å‡½æ•°"><a href="#3-reactive-å‡½æ•°" class="headerlink" title="3.reactive å‡½æ•°"></a>3.reactive å‡½æ•°</h3><ul><li>ä½œç”¨: å®šä¹‰ä¸€ä¸ªå¯¹è±¡ç±»å‹çš„å“åº”å¼æ•°æ®ï¼ˆåŸºæœ¬ç±»å‹ä¸è¦ç”¨å®ƒï¼Œè¦ç”¨<code>ref</code>å‡½æ•°ï¼‰</li><li>è¯­æ³•ï¼š<code>const ä»£ç†å¯¹è±¡= reactive(æºå¯¹è±¡)</code>æ¥æ”¶ä¸€ä¸ªå¯¹è±¡ï¼ˆæˆ–æ•°ç»„ï¼‰ï¼Œè¿”å›ä¸€ä¸ªä»£ç†å¯¹è±¡ï¼ˆProxy çš„å®ä¾‹å¯¹è±¡ï¼Œç®€ç§° proxy å¯¹è±¡ï¼‰</li><li>reactive å®šä¹‰çš„å“åº”å¼æ•°æ®æ˜¯â€œæ·±å±‚æ¬¡çš„â€ã€‚</li><li>å†…éƒ¨åŸºäº ES6 çš„ Proxy å®ç°ï¼Œé€šè¿‡ä»£ç†å¯¹è±¡æ“ä½œæºå¯¹è±¡å†…éƒ¨æ•°æ®è¿›è¡Œæ“ä½œã€‚</li></ul><h3 id="4-Vue3-0-ä¸­çš„å“åº”å¼åŸç†"><a href="#4-Vue3-0-ä¸­çš„å“åº”å¼åŸç†" class="headerlink" title="4.Vue3.0 ä¸­çš„å“åº”å¼åŸç†"></a>4.Vue3.0 ä¸­çš„å“åº”å¼åŸç†</h3><h4 id="vue2-x-çš„å“åº”å¼"><a href="#vue2-x-çš„å“åº”å¼" class="headerlink" title="vue2.x çš„å“åº”å¼"></a>vue2.x çš„å“åº”å¼</h4><ul><li>å®ç°åŸç†ï¼š<ul><li>å¯¹è±¡ç±»å‹ï¼šé€šè¿‡<code>Object.defineProperty()</code>å¯¹å±æ€§çš„è¯»å–ã€ä¿®æ”¹è¿›è¡Œæ‹¦æˆªï¼ˆæ•°æ®åŠ«æŒï¼‰ã€‚</li><li>æ•°ç»„ç±»å‹ï¼šé€šè¿‡é‡å†™æ›´æ–°æ•°ç»„çš„ä¸€ç³»åˆ—æ–¹æ³•æ¥å®ç°æ‹¦æˆªã€‚ï¼ˆå¯¹æ•°ç»„çš„å˜æ›´æ–¹æ³•è¿›è¡Œäº†åŒ…è£¹ï¼‰ã€‚</li></ul></li></ul><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="title class_">Object</span>.<span class="title function_">defineProperty</span>(data, <span class="string">&quot;count&quot;</span>, &#123;</span><br><span class="line">  <span class="title function_">get</span>(<span class="params"></span>) &#123;&#125;,</span><br><span class="line">  <span class="title function_">set</span>(<span class="params"></span>) &#123;&#125;,</span><br><span class="line">&#125;);</span><br></pre></td></tr></table></figure><ul><li>å­˜åœ¨é—®é¢˜ï¼š<ul><li>æ–°å¢å±æ€§ã€åˆ é™¤å±æ€§, ç•Œé¢ä¸ä¼šæ›´æ–°ã€‚</li><li>ç›´æ¥é€šè¿‡ä¸‹æ ‡ä¿®æ”¹æ•°ç»„, ç•Œé¢ä¸ä¼šè‡ªåŠ¨æ›´æ–°ã€‚</li></ul></li></ul><h4 id="Vue3-0-çš„å“åº”å¼"><a href="#Vue3-0-çš„å“åº”å¼" class="headerlink" title="Vue3.0 çš„å“åº”å¼"></a>Vue3.0 çš„å“åº”å¼</h4><ul><li>å®ç°åŸç†:<ul><li>é€šè¿‡ Proxyï¼ˆä»£ç†ï¼‰: Â  æ‹¦æˆªå¯¹è±¡ä¸­ä»»æ„å±æ€§çš„å˜åŒ–, åŒ…æ‹¬ï¼šå±æ€§å€¼çš„è¯»å†™ã€å±æ€§çš„æ·»åŠ ã€å±æ€§çš„åˆ é™¤ç­‰ã€‚</li><li>é€šè¿‡ Reflectï¼ˆåå°„ï¼‰: Â  å¯¹æºå¯¹è±¡çš„å±æ€§è¿›è¡Œæ“ä½œã€‚</li><li>MDN æ–‡æ¡£ä¸­æè¿°çš„ Proxy ä¸ Reflectï¼š<ul><li>Proxyï¼š<a class="link" target="_blank" rel="noopener" href="https://developer.mozilla.org/zh-CN/docs/Web/JavaScript/Reference/Global_Objects/Proxy">https://developer.mozilla.org/zh-CN/docs/Web/JavaScript/Reference/Global_Objects&#x2F;Proxy<i class="fas fa-external-link-alt"></i></a></li><li>Reflectï¼š<a class="link" target="_blank" rel="noopener" href="https://developer.mozilla.org/zh-CN/docs/Web/JavaScript/Reference/Global_Objects/Reflect">https://developer.mozilla.org/zh-CN/docs/Web/JavaScript/Reference/Global_Objects&#x2F;Reflect<i class="fas fa-external-link-alt"></i></a></li></ul></li></ul></li></ul><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">new</span> <span class="title class_">Proxy</span>(data, &#123;</span><br><span class="line">  <span class="comment">// æ‹¦æˆªè¯»å–å±æ€§å€¼</span></span><br><span class="line">  <span class="title function_">get</span>(<span class="params">target, prop</span>) &#123;</span><br><span class="line">    <span class="keyword">return</span> <span class="title class_">Reflect</span>.<span class="title function_">get</span>(target, prop);</span><br><span class="line">  &#125;,</span><br><span class="line">  <span class="comment">// æ‹¦æˆªè®¾ç½®å±æ€§å€¼æˆ–æ·»åŠ æ–°å±æ€§</span></span><br><span class="line">  <span class="title function_">set</span>(<span class="params">target, prop, value</span>) &#123;</span><br><span class="line">    <span class="keyword">return</span> <span class="title class_">Reflect</span>.<span class="title function_">set</span>(target, prop, value);</span><br><span class="line">  &#125;,</span><br><span class="line">  <span class="comment">// æ‹¦æˆªåˆ é™¤å±æ€§</span></span><br><span class="line">  <span class="title function_">deleteProperty</span>(<span class="params">target, prop</span>) &#123;</span><br><span class="line">    <span class="keyword">return</span> <span class="title class_">Reflect</span>.<span class="title function_">deleteProperty</span>(target, prop);</span><br><span class="line">  &#125;,</span><br><span class="line">&#125;);</span><br><span class="line"></span><br><span class="line">proxy.<span class="property">name</span> = <span class="string">&quot;tom&quot;</span>;</span><br></pre></td></tr></table></figure><h3 id="5-reactive-å¯¹æ¯”-ref"><a href="#5-reactive-å¯¹æ¯”-ref" class="headerlink" title="5.reactive å¯¹æ¯” ref"></a>5.reactive å¯¹æ¯” ref</h3><ul><li>ä»å®šä¹‰æ•°æ®è§’åº¦å¯¹æ¯”ï¼š<ul><li>ref ç”¨æ¥å®šä¹‰ï¼šåŸºæœ¬ç±»å‹æ•°æ®ã€‚</li><li>reactive ç”¨æ¥å®šä¹‰ï¼šå¯¹è±¡ï¼ˆæˆ–æ•°ç»„ï¼‰ç±»å‹æ•°æ®ã€‚</li><li>å¤‡æ³¨ï¼šref ä¹Ÿå¯ä»¥ç”¨æ¥å®šä¹‰å¯¹è±¡ï¼ˆæˆ–æ•°ç»„ï¼‰ç±»å‹æ•°æ®, å®ƒå†…éƒ¨ä¼šè‡ªåŠ¨é€šè¿‡<code>reactive</code>è½¬ä¸ºä»£ç†å¯¹è±¡ã€‚</li></ul></li><li>ä»åŸç†è§’åº¦å¯¹æ¯”ï¼š<ul><li>ref é€šè¿‡<code>Object.defineProperty()</code>çš„<code>get</code>ä¸<code>set</code>æ¥å®ç°å“åº”å¼ï¼ˆæ•°æ®åŠ«æŒï¼‰ã€‚</li><li>reactive é€šè¿‡ä½¿ç”¨ Proxy æ¥å®ç°å“åº”å¼ï¼ˆæ•°æ®åŠ«æŒï¼‰, å¹¶é€šè¿‡ Reflect æ“ä½œæºå¯¹è±¡å†…éƒ¨çš„æ•°æ®ã€‚</li></ul></li><li>ä»ä½¿ç”¨è§’åº¦å¯¹æ¯”ï¼š<ul><li>ref å®šä¹‰çš„æ•°æ®ï¼šæ“ä½œæ•°æ®éœ€è¦<code>.value</code>ï¼Œè¯»å–æ•°æ®æ—¶æ¨¡æ¿ä¸­ç›´æ¥è¯»å–ä¸éœ€è¦<code>.value</code>ã€‚</li><li>reactive å®šä¹‰çš„æ•°æ®ï¼šæ“ä½œæ•°æ®ä¸è¯»å–æ•°æ®ï¼šå‡ä¸éœ€è¦<code>.value</code>ã€‚</li></ul></li></ul><h3 id="6-setup-çš„ä¸¤ä¸ªæ³¨æ„ç‚¹"><a href="#6-setup-çš„ä¸¤ä¸ªæ³¨æ„ç‚¹" class="headerlink" title="6.setup çš„ä¸¤ä¸ªæ³¨æ„ç‚¹"></a>6.setup çš„ä¸¤ä¸ªæ³¨æ„ç‚¹</h3><ul><li>setup æ‰§è¡Œçš„æ—¶æœº<ul><li>åœ¨ beforeCreate ä¹‹å‰æ‰§è¡Œä¸€æ¬¡ï¼Œthis æ˜¯ undefinedã€‚</li></ul></li><li>setup çš„å‚æ•°<ul><li>propsï¼šå€¼ä¸ºå¯¹è±¡ï¼ŒåŒ…å«ï¼šç»„ä»¶å¤–éƒ¨ä¼ é€’è¿‡æ¥ï¼Œä¸”ç»„ä»¶å†…éƒ¨å£°æ˜æ¥æ”¶äº†çš„å±æ€§ã€‚</li><li>contextï¼šä¸Šä¸‹æ–‡å¯¹è±¡<ul><li>attrs: å€¼ä¸ºå¯¹è±¡ï¼ŒåŒ…å«ï¼šç»„ä»¶å¤–éƒ¨ä¼ é€’è¿‡æ¥ï¼Œä½†æ²¡æœ‰åœ¨ props é…ç½®ä¸­å£°æ˜çš„å±æ€§, ç›¸å½“äº <code>this.$attrs</code>ã€‚</li><li>slots: æ”¶åˆ°çš„æ’æ§½å†…å®¹, ç›¸å½“äº <code>this.$slots</code>ã€‚</li><li>emit: åˆ†å‘è‡ªå®šä¹‰äº‹ä»¶çš„å‡½æ•°, ç›¸å½“äº <code>this.$emit</code>ã€‚</li></ul></li></ul></li></ul><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br></pre></td><td class="code"><pre><span class="line">&lt;template&gt;</span><br><span class="line">  &lt;!-- vue3ä¸­æ¨¡æ¿ä¸­å¯ä»¥æ²¡æœ‰æ ¹æ ‡ç­¾ --&gt;</span><br><span class="line">  &lt;HelloWorld :job=&quot;job&quot; :hobby=&quot;hobby&quot; @sayHello=&quot;sayHello&quot;&gt;</span><br><span class="line">    &lt;template v-slot:job&gt;</span><br><span class="line">      &lt;div&gt;å§“åï¼š&#123;&#123; name &#125;&#125;&lt;/div&gt;</span><br><span class="line">      &lt;div&gt;å¹´é¾„ï¼š&#123;&#123; age &#125;&#125;&lt;/div&gt;</span><br><span class="line">      &lt;button @click=&quot;sayHello()&quot;&gt;Appç»„ä»¶çš„æŒ‰é’®&lt;/button&gt;</span><br><span class="line">    &lt;/template&gt;</span><br><span class="line">  &lt;/HelloWorld&gt;</span><br><span class="line">&lt;/template&gt;</span><br><span class="line"></span><br><span class="line">&lt;script&gt;</span><br><span class="line">import HelloWorld from &quot;./components/HelloWorld.vue&quot;;</span><br><span class="line">import &#123; ref, reactive &#125; from &quot;vue&quot;;</span><br><span class="line"></span><br><span class="line">export default &#123;</span><br><span class="line">  name: &quot;App&quot;,</span><br><span class="line">  components: &#123;</span><br><span class="line">    HelloWorld,</span><br><span class="line">  &#125;,</span><br><span class="line">  setup() &#123;</span><br><span class="line">    let name = ref(&quot;å¼ ä¸‰&quot;);</span><br><span class="line">    let age = ref(18);</span><br><span class="line">    let job = reactive(&#123;</span><br><span class="line">      type: &quot;å‰ç«¯å¼€å‘å·¥ç¨‹å¸ˆ&quot;,</span><br><span class="line">      salary: &quot;30K&quot;,</span><br><span class="line">    &#125;);</span><br><span class="line">    let hobby = reactive([&quot;æŠ½çƒŸ&quot;, &quot;å–é…’&quot;, &quot;çƒ«å¤´&quot;]);</span><br><span class="line">    function sayHello(j = &#123;&#125;, h = &quot;&quot;) &#123;</span><br><span class="line">      name.value = &quot;æå››&quot;;</span><br><span class="line">      age.value = &quot;45&quot;;</span><br><span class="line">      job.type = j.type || &quot;UIè®¾è®¡å¸ˆ&quot;;</span><br><span class="line">      job.salary = j.salary || &quot;10K&quot;;</span><br><span class="line">      hobby[0] = h || &quot;å”±æ­Œ&quot;;</span><br><span class="line">    &#125;</span><br><span class="line">    return &#123;</span><br><span class="line">      name,</span><br><span class="line">      age,</span><br><span class="line">      job,</span><br><span class="line">      hobby,</span><br><span class="line">      sayHello,</span><br><span class="line">    &#125;;</span><br><span class="line">    // return (q) =&gt; &#123;</span><br><span class="line">    //   console.log(&quot;return&quot;, q, this);</span><br><span class="line">    //   return h(&quot;h1&quot;, &quot;dome&quot;);</span><br><span class="line">    // &#125;;</span><br><span class="line">  &#125;,</span><br><span class="line">&#125;;</span><br><span class="line">&lt;/script&gt;</span><br></pre></td></tr></table></figure><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br></pre></td><td class="code"><pre><span class="line">&lt;template&gt;</span><br><span class="line">  &lt;slot name=&quot;job&quot;&gt;&lt;/slot&gt;</span><br><span class="line">  &lt;div&gt;èŒä¸šï¼š&#123;&#123; job.type &#125;&#125;&lt;/div&gt;</span><br><span class="line">  &lt;div&gt;è–ªèµ„ï¼š&#123;&#123; job.salary &#125;&#125;&lt;/div&gt;</span><br><span class="line">  &lt;div&gt;çˆ±å¥½ï¼š&#123;&#123; hobby &#125;&#125;&lt;/div&gt;</span><br><span class="line">  &lt;button @click=&quot;test&quot;&gt;HelloWorldçš„æŒ‰é’®&lt;/button&gt;</span><br><span class="line">&lt;/template&gt;</span><br><span class="line"></span><br><span class="line">&lt;script&gt;</span><br><span class="line">export default &#123;</span><br><span class="line">  name: &quot;HelloWorld&quot;,</span><br><span class="line">  props: [&quot;job&quot;, &quot;hobby&quot;],</span><br><span class="line">  emits: [&quot;sayHello&quot;],</span><br><span class="line">  setup(props, context) &#123;</span><br><span class="line">    function test() &#123;</span><br><span class="line">      const job = &#123;</span><br><span class="line">        type: &quot;JAVAå¼€å‘&quot;,</span><br><span class="line">        salary: &quot;100K&quot;,</span><br><span class="line">      &#125;;</span><br><span class="line">      const hobby = &quot;è·³&quot;;</span><br><span class="line">      context.emit(&quot;sayHello&quot;, job, hobby);</span><br><span class="line">    &#125;</span><br><span class="line">    return &#123; test &#125;;</span><br><span class="line">  &#125;,</span><br><span class="line">&#125;;</span><br><span class="line">&lt;/script&gt;</span><br></pre></td></tr></table></figure><h2 id="å…¶å®ƒ-CompositionAPI"><a href="#å…¶å®ƒ-CompositionAPI" class="headerlink" title="å…¶å®ƒ CompositionAPI"></a>å…¶å®ƒ CompositionAPI</h2><h3 id="shallowReactive-ä¸-shallowRef"><a href="#shallowReactive-ä¸-shallowRef" class="headerlink" title="shallowReactive ä¸ shallowRef"></a>shallowReactive ä¸ shallowRef</h3><ul><li>shallowReactiveï¼šåªå¤„ç†å¯¹è±¡æœ€å¤–å±‚å±æ€§çš„å“åº”å¼ï¼ˆæµ…å“åº”å¼ï¼‰ã€‚</li><li>shallowRefï¼šåªå¤„ç†åŸºæœ¬æ•°æ®ç±»å‹çš„å“åº”å¼, ä¸è¿›è¡Œå¯¹è±¡çš„å“åº”å¼å¤„ç†ã€‚</li><li>ä»€ä¹ˆæ—¶å€™ä½¿ç”¨?<ul><li>å¦‚æœæœ‰ä¸€ä¸ªå¯¹è±¡æ•°æ®ï¼Œç»“æ„æ¯”è¾ƒæ·±, ä½†å˜åŒ–æ—¶åªæ˜¯å¤–å±‚å±æ€§å˜åŒ– &#x3D;&#x3D;&#x3D;&gt; shallowReactiveã€‚</li><li>å¦‚æœæœ‰ä¸€ä¸ªå¯¹è±¡æ•°æ®ï¼Œåç»­åŠŸèƒ½ä¸ä¼šä¿®æ”¹è¯¥å¯¹è±¡ä¸­çš„å±æ€§ï¼Œè€Œæ˜¯ç”Ÿæ–°çš„å¯¹è±¡æ¥æ›¿æ¢ &#x3D;&#x3D;&#x3D;&gt; shallowRefã€‚</li></ul></li></ul><h3 id="readonly-ä¸-shallowReadonly"><a href="#readonly-ä¸-shallowReadonly" class="headerlink" title="readonly ä¸ shallowReadonly"></a>readonly ä¸ shallowReadonly</h3><ul><li>readonly: è®©ä¸€ä¸ªå“åº”å¼æ•°æ®å˜ä¸ºåªè¯»çš„ï¼ˆæ·±åªè¯»ï¼‰ã€‚</li><li>shallowReadonlyï¼šè®©ä¸€ä¸ªå“åº”å¼æ•°æ®å˜ä¸ºåªè¯»çš„ï¼ˆæµ…åªè¯»ï¼‰ã€‚</li><li>åº”ç”¨åœºæ™¯: ä¸å¸Œæœ›æ•°æ®è¢«ä¿®æ”¹æ—¶ã€‚</li></ul><h3 id="toRaw-ä¸-markRaw"><a href="#toRaw-ä¸-markRaw" class="headerlink" title="toRaw ä¸ markRaw"></a>toRaw ä¸ markRaw</h3><ul><li>toRawï¼š<ul><li>ä½œç”¨ï¼šå°†ä¸€ä¸ªç”±<code>reactive</code>ç”Ÿæˆçš„å“åº”å¼å¯¹è±¡è½¬ä¸ºæ™®é€šå¯¹è±¡ã€‚</li><li>ä½¿ç”¨åœºæ™¯ï¼šç”¨äºè¯»å–å“åº”å¼å¯¹è±¡å¯¹åº”çš„æ™®é€šå¯¹è±¡ï¼Œå¯¹è¿™ä¸ªæ™®é€šå¯¹è±¡çš„æ‰€æœ‰æ“ä½œï¼Œä¸ä¼šå¼•èµ·é¡µé¢æ›´æ–°ã€‚</li></ul></li><li>markRawï¼š<ul><li>ä½œç”¨ï¼šæ ‡è®°ä¸€ä¸ªå¯¹è±¡ï¼Œä½¿å…¶æ°¸è¿œä¸ä¼šå†æˆä¸ºå“åº”å¼å¯¹è±¡ã€‚</li><li>åº”ç”¨åœºæ™¯:<ol><li>æœ‰äº›å€¼ä¸åº”è¢«è®¾ç½®ä¸ºå“åº”å¼çš„ï¼Œä¾‹å¦‚å¤æ‚çš„ç¬¬ä¸‰æ–¹ç±»åº“ç­‰ã€‚</li><li>å½“æ¸²æŸ“å…·æœ‰ä¸å¯å˜æ•°æ®æºçš„å¤§åˆ—è¡¨æ—¶ï¼Œè·³è¿‡å“åº”å¼è½¬æ¢å¯ä»¥æé«˜æ€§èƒ½ã€‚</li></ol></li></ul></li></ul><h3 id="customRef"><a href="#customRef" class="headerlink" title="customRef"></a>customRef</h3><ul><li>ä½œç”¨ï¼šåˆ›å»ºä¸€ä¸ªè‡ªå®šä¹‰çš„ refï¼Œå¹¶å¯¹å…¶ä¾èµ–é¡¹è·Ÿè¸ªå’Œæ›´æ–°è§¦å‘è¿›è¡Œæ˜¾å¼æ§åˆ¶ã€‚</li><li>å®ç°é˜²æŠ–æ•ˆæœï¼š</li></ul><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br></pre></td><td class="code"><pre><span class="line">&lt;template&gt;</span><br><span class="line">  &lt;input type=&quot;text&quot; v-model=&quot;keyword&quot; /&gt;</span><br><span class="line">  &lt;h3&gt;&#123;&#123; keyword &#125;&#125;&lt;/h3&gt;</span><br><span class="line">&lt;/template&gt;</span><br><span class="line"></span><br><span class="line">&lt;script&gt;</span><br><span class="line">import &#123; ref, customRef &#125; from &quot;vue&quot;;</span><br><span class="line">export default &#123;</span><br><span class="line">  name: &quot;Demo&quot;,</span><br><span class="line">  setup() &#123;</span><br><span class="line">    // let keyword = ref(&#x27;hello&#x27;) //ä½¿ç”¨Vueå‡†å¤‡å¥½çš„å†…ç½®ref</span><br><span class="line">    //è‡ªå®šä¹‰ä¸€ä¸ªmyRef</span><br><span class="line">    function myRef(value, delay) &#123;</span><br><span class="line">      let timer;</span><br><span class="line">      //é€šè¿‡customRefå»å®ç°è‡ªå®šä¹‰</span><br><span class="line">      return customRef((track, trigger) =&gt; &#123;</span><br><span class="line">        return &#123;</span><br><span class="line">          get() &#123;</span><br><span class="line">            track(); //å‘Šè¯‰Vueè¿™ä¸ªvalueå€¼æ˜¯éœ€è¦è¢«â€œè¿½è¸ªâ€çš„</span><br><span class="line">            return value;</span><br><span class="line">          &#125;,</span><br><span class="line">          set(newValue) &#123;</span><br><span class="line">            clearTimeout(timer);</span><br><span class="line">            timer = setTimeout(() =&gt; &#123;</span><br><span class="line">              value = newValue;</span><br><span class="line">              trigger(); //å‘Šè¯‰Vueå»æ›´æ–°ç•Œé¢</span><br><span class="line">            &#125;, delay);</span><br><span class="line">          &#125;,</span><br><span class="line">        &#125;;</span><br><span class="line">      &#125;);</span><br><span class="line">    &#125;</span><br><span class="line">    let keyword = myRef(&quot;hello&quot;, 500); //ä½¿ç”¨ç¨‹åºå‘˜è‡ªå®šä¹‰çš„ref</span><br><span class="line">    return &#123;</span><br><span class="line">      keyword,</span><br><span class="line">    &#125;;</span><br><span class="line">  &#125;,</span><br><span class="line">&#125;;</span><br><span class="line">&lt;/script&gt;</span><br></pre></td></tr></table></figure><h3 id="provide-ä¸-inject"><a href="#provide-ä¸-inject" class="headerlink" title="provide ä¸ inject"></a>provide ä¸ inject</h3><p><img lazyload alt="image" data-src="/blog/images/0ab2bf3c-6e52-44d4-b3ec-3367eb891a08.png"></p><ul><li>ä½œç”¨ï¼šå®ç°ç¥–ä¸åä»£ç»„ä»¶é—´é€šä¿¡</li><li>å¥—è·¯ï¼šçˆ¶ç»„ä»¶æœ‰ä¸€ä¸ª <code>provide</code> é€‰é¡¹æ¥æä¾›æ•°æ®ï¼Œåä»£ç»„ä»¶æœ‰ä¸€ä¸ª <code>inject</code> é€‰é¡¹æ¥å¼€å§‹ä½¿ç”¨è¿™äº›æ•°æ®</li><li>å…·ä½“å†™æ³•ï¼š<ol><li>ç¥–ç»„ä»¶ä¸­ï¼š</li></ol></li></ul><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="title function_">setup</span>(<span class="params"></span>)&#123;</span><br><span class="line">	......</span><br><span class="line">    <span class="keyword">let</span> car = <span class="title function_">reactive</span>(&#123;<span class="attr">name</span>:<span class="string">&#x27;å¥”é©°&#x27;</span>,<span class="attr">price</span>:<span class="string">&#x27;40ä¸‡&#x27;</span>&#125;)</span><br><span class="line">    <span class="title function_">provide</span>(<span class="string">&#x27;car&#x27;</span>,car)</span><br><span class="line">    ......</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><ol start="2"><li>åä»£ç»„ä»¶ä¸­ï¼š</li></ol><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="title function_">setup</span>(<span class="params">props,context</span>)&#123;</span><br><span class="line">	......</span><br><span class="line">    <span class="keyword">const</span> car = <span class="title function_">inject</span>(<span class="string">&#x27;car&#x27;</span>)</span><br><span class="line">    <span class="keyword">return</span> &#123;car&#125;</span><br><span class="line">	......</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h3 id="å“åº”å¼æ•°æ®çš„åˆ¤æ–­"><a href="#å“åº”å¼æ•°æ®çš„åˆ¤æ–­" class="headerlink" title="å“åº”å¼æ•°æ®çš„åˆ¤æ–­"></a>å“åº”å¼æ•°æ®çš„åˆ¤æ–­</h3><ul><li>isRef: æ£€æŸ¥ä¸€ä¸ªå€¼æ˜¯å¦ä¸ºä¸€ä¸ª ref å¯¹è±¡</li><li>isReactive: æ£€æŸ¥ä¸€ä¸ªå¯¹è±¡æ˜¯å¦æ˜¯ç”± <code>reactive</code> åˆ›å»ºçš„å“åº”å¼ä»£ç†</li><li>isReadonly: æ£€æŸ¥ä¸€ä¸ªå¯¹è±¡æ˜¯å¦æ˜¯ç”± <code>readonly</code> åˆ›å»ºçš„åªè¯»ä»£ç†</li><li>isProxy: æ£€æŸ¥ä¸€ä¸ªå¯¹è±¡æ˜¯å¦æ˜¯ç”± <code>reactive</code> æˆ–è€… <code>readonly</code> æ–¹æ³•åˆ›å»ºçš„ä»£ç†</li></ul><h3 id="getCurrentInstance"><a href="#getCurrentInstance" class="headerlink" title="getCurrentInstance"></a>getCurrentInstance</h3><p><code>getCurrentInstance</code>æ”¯æŒè®¿é—®å†…éƒ¨ç»„ä»¶å®ä¾‹ã€‚<br><code>getCurrentInstance</code>åªæš´éœ²ç»™é«˜é˜¶ä½¿ç”¨åœºæ™¯ï¼Œå…¸å‹çš„æ¯”å¦‚åœ¨åº“ä¸­ã€‚å¼ºçƒˆåå¯¹åœ¨åº”ç”¨çš„ä»£ç ä¸­ä½¿ç”¨ <code>getCurrentInstance</code>ã€‚è¯·ä¸è¦æŠŠå®ƒå½“ä½œåœ¨ç»„åˆå¼ API ä¸­è·å– this çš„æ›¿ä»£æ–¹æ¡ˆæ¥ä½¿ç”¨ã€‚</p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> &#123; getCurrentInstance &#125; <span class="keyword">from</span> <span class="string">&quot;vue&quot;</span>;</span><br><span class="line"></span><br><span class="line"><span class="keyword">const</span> <span class="title class_">MyComponent</span> = &#123;</span><br><span class="line">  <span class="title function_">setup</span>(<span class="params"></span>) &#123;</span><br><span class="line">    <span class="keyword">const</span> internalInstance = <span class="title function_">getCurrentInstance</span>();</span><br><span class="line"></span><br><span class="line">    internalInstance.<span class="property">appContext</span>.<span class="property">config</span>.<span class="property">globalProperties</span>; <span class="comment">// è®¿é—® globalProperties</span></span><br><span class="line">  &#125;,</span><br><span class="line">&#125;;</span><br></pre></td></tr></table></figure><p><code>getCurrentInstance</code>åªèƒ½åœ¨ <a class="link" target="_blank" rel="noopener" href="https://v3.cn.vuejs.org/api/composition-api.html#setup">setup<i class="fas fa-external-link-alt"></i></a> æˆ–<a class="link" target="_blank" rel="noopener" href="https://v3.cn.vuejs.org/api/composition-api.html#%E7%94%9F%E5%91%BD%E5%91%A8%E6%9C%9F%E9%92%A9%E5%AD%90">ç”Ÿå‘½å‘¨æœŸé’©å­<i class="fas fa-external-link-alt"></i></a>ä¸­è°ƒç”¨ã€‚<br>å¦‚éœ€åœ¨ <a class="link" target="_blank" rel="noopener" href="https://v3.cn.vuejs.org/api/composition-api.html#setup">setup<i class="fas fa-external-link-alt"></i></a> æˆ–<a class="link" target="_blank" rel="noopener" href="https://v3.cn.vuejs.org/api/composition-api.html#%E7%94%9F%E5%91%BD%E5%91%A8%E6%9C%9F%E9%92%A9%E5%AD%90">ç”Ÿå‘½å‘¨æœŸé’©å­<i class="fas fa-external-link-alt"></i></a>å¤–ä½¿ç”¨ï¼Œè¯·å…ˆåœ¨ setup ä¸­è°ƒç”¨<code>getCurrentInstance()</code>è·å–è¯¥å®ä¾‹ç„¶åå†ä½¿ç”¨ã€‚</p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> <span class="title class_">MyComponent</span> = &#123;</span><br><span class="line">  <span class="title function_">setup</span>(<span class="params"></span>) &#123;</span><br><span class="line">    <span class="keyword">const</span> internalInstance = <span class="title function_">getCurrentInstance</span>(); <span class="comment">// æœ‰æ•ˆ</span></span><br><span class="line"></span><br><span class="line">    <span class="keyword">const</span> id = <span class="title function_">useComponentId</span>(); <span class="comment">// æœ‰æ•ˆ</span></span><br><span class="line"></span><br><span class="line">    <span class="keyword">const</span> <span class="title function_">handleClick</span> = (<span class="params"></span>) =&gt; &#123;</span><br><span class="line">      <span class="title function_">getCurrentInstance</span>(); <span class="comment">// æ— æ•ˆ</span></span><br><span class="line">      <span class="title function_">useComponentId</span>(); <span class="comment">// æ— æ•ˆ</span></span><br><span class="line"></span><br><span class="line">      internalInstance; <span class="comment">// æœ‰æ•ˆ</span></span><br><span class="line">    &#125;;</span><br><span class="line"></span><br><span class="line">    <span class="title function_">onMounted</span>(<span class="function">() =&gt;</span> &#123;</span><br><span class="line">      <span class="title function_">getCurrentInstance</span>(); <span class="comment">// æœ‰æ•ˆ</span></span><br><span class="line">    &#125;);</span><br><span class="line"></span><br><span class="line">    <span class="keyword">return</span> <span class="function">() =&gt;</span></span><br><span class="line">      <span class="title function_">h</span>(</span><br><span class="line">        <span class="string">&quot;button&quot;</span>,</span><br><span class="line">        &#123;</span><br><span class="line">          <span class="attr">onClick</span>: handleClick,</span><br><span class="line">        &#125;,</span><br><span class="line">        <span class="string">`uid: <span class="subst">$&#123;id&#125;</span>`</span></span><br><span class="line">      );</span><br><span class="line">  &#125;,</span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line"><span class="comment">// åœ¨ç»„åˆå¼å‡½æ•°ä¸­è°ƒç”¨ä¹Ÿå¯ä»¥æ­£å¸¸æ‰§è¡Œ</span></span><br><span class="line"><span class="keyword">function</span> <span class="title function_">useComponentId</span>(<span class="params"></span>) &#123;</span><br><span class="line">  <span class="keyword">return</span> <span class="title function_">getCurrentInstance</span>().<span class="property">uid</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h3 id="Composition-API-çš„ä¼˜åŠ¿"><a href="#Composition-API-çš„ä¼˜åŠ¿" class="headerlink" title="Composition API çš„ä¼˜åŠ¿"></a>Composition API çš„ä¼˜åŠ¿</h3><h4 id="Options-API-å­˜åœ¨çš„é—®é¢˜"><a href="#Options-API-å­˜åœ¨çš„é—®é¢˜" class="headerlink" title="Options API å­˜åœ¨çš„é—®é¢˜"></a>Options API å­˜åœ¨çš„é—®é¢˜</h4><p>ä½¿ç”¨ä¼ ç»Ÿ OptionsAPI ä¸­ï¼Œæ–°å¢æˆ–è€…ä¿®æ”¹ä¸€ä¸ªéœ€æ±‚ï¼Œå°±éœ€è¦åˆ†åˆ«åœ¨ dataï¼Œmethodsï¼Œcomputed é‡Œä¿®æ”¹ ã€‚<br><img lazyload alt="image" data-src="/blog/images/f84e4e2c02424d9a99862ade0a2e4114~tplv-k3u1fbpfcp-watermark.gif"><img lazyload alt="image" data-src="/blog/images/e5ac7e20d1784887a826f6360768a368~tplv-k3u1fbpfcp-watermark.gif"></p><h4 id="Composition-API-çš„ä¼˜åŠ¿-1"><a href="#Composition-API-çš„ä¼˜åŠ¿-1" class="headerlink" title="Composition API çš„ä¼˜åŠ¿"></a>Composition API çš„ä¼˜åŠ¿</h4><p>æˆ‘ä»¬å¯ä»¥æ›´åŠ ä¼˜é›…çš„ç»„ç»‡æˆ‘ä»¬çš„ä»£ç ï¼Œå‡½æ•°ã€‚è®©ç›¸å…³åŠŸèƒ½çš„ä»£ç æ›´åŠ æœ‰åºçš„ç»„ç»‡åœ¨ä¸€èµ·ã€‚<br><img lazyload alt="image" data-src="/blog/images/6cc55165c0e34069a75fe36f8712eb80~tplv-k3u1fbpfcp-watermark.gif"><img lazyload alt="image" data-src="/blog/images/6cc55165c0e34069a75fe36f8712eb80~tplv-rk.gif"></p><h2 id="ç”Ÿå‘½å‘¨æœŸ"><a href="#ç”Ÿå‘½å‘¨æœŸ" class="headerlink" title="ç”Ÿå‘½å‘¨æœŸ"></a>ç”Ÿå‘½å‘¨æœŸ</h2><p>vue2.x çš„ç”Ÿå‘½å‘¨æœŸ<br><img lazyload alt="image" data-src="/blog/images/1569655790584-a5e09649-ecbe-40eb-864c-fe110dd31efc.png" alt="vue2.xçš„ç”Ÿå‘½å‘¨æœŸå›¾"></p><p>vue3.0 çš„ç”Ÿå‘½å‘¨æœŸ<br><img lazyload alt="image" data-src="/blog/images/4c612100-eda5-4233-9e83-9367b4ade839.svg" alt="vue3.0çš„ç”Ÿå‘½å‘¨æœŸ"></p><ul><li>Vue3.0 ä¸­å¯ä»¥ç»§ç»­ä½¿ç”¨ Vue2.x ä¸­çš„ç”Ÿå‘½å‘¨æœŸé’©å­ï¼Œä½†æœ‰æœ‰ä¸¤ä¸ªè¢«æ›´åï¼š<ul><li><code>beforeDestroy</code>æ”¹åä¸º <code>beforeUnmount</code></li><li><code>destroyed</code>æ”¹åä¸º <code>unmounted</code></li></ul></li><li>Vue3.0 ä¹Ÿæä¾›äº† Composition API å½¢å¼çš„ç”Ÿå‘½å‘¨æœŸé’©å­ï¼Œä¸ Vue2.x ä¸­é’©å­å¯¹åº”å…³ç³»å¦‚ä¸‹ï¼š<ul><li><code>beforeCreate</code>&#x3D;&#x3D;&#x3D;&gt;<code>setup()</code></li><li><code>created</code>&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&gt;<code>setup()</code></li><li><code>beforeMount</code> &#x3D;&#x3D;&#x3D;&gt;<code>onBeforeMount</code></li><li><code>mounted</code>&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&gt;<code>onMounted</code></li><li><code>beforeUpdate</code>&#x3D;&#x3D;&#x3D;&gt;<code>onBeforeUpdate</code></li><li><code>updated</code> &#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&gt;<code>onUpdated</code></li><li><code>beforeUnmount</code>Â &#x3D;&#x3D;&gt;<code>onBeforeUnmount</code></li><li><code>unmounted</code> &#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&gt;<code>onUnmounted</code></li></ul></li><li>å¦‚æœåœ¨é…ç½®é¡¹å’Œ Composition API éƒ½ä½¿ç”¨äº†ç”Ÿå‘½å‘¨æœŸï¼Œé‚£ä¹ˆ Composition API ä¼˜å…ˆè¢«è°ƒç”¨ã€‚</li><li>å¦‚æœæœ‰ç»„ä»¶åµŒå¥—ä¼šå…ˆæ‰§è¡Œçˆ¶çº§çš„é’©å­ã€‚å¦‚ä¸‹å›¾</li><li><img lazyload alt="image" data-src="/blog/images/23r23er2q3wrd.png" alt="image.png"><img lazyload alt="image" data-src="/blog/images/qwe23r23.png" alt="image.png"><img lazyload alt="image" data-src="/blog/images/2131e2.png" alt="image.png"></li></ul><h2 id="toRef"><a href="#toRef" class="headerlink" title="toRef"></a>toRef</h2><ul><li>ä½œç”¨ï¼šåˆ›å»ºä¸€ä¸ª ref å¯¹è±¡ï¼Œå…¶ value å€¼æŒ‡å‘å¦ä¸€ä¸ªå¯¹è±¡ä¸­çš„æŸä¸ªå±æ€§ã€‚</li><li>è¯­æ³•ï¼š<code>const name = toRef(person,&#39;name&#39;)</code></li><li>åº”ç”¨: Â  è¦å°†å“åº”å¼å¯¹è±¡ä¸­çš„æŸä¸ªå±æ€§å•ç‹¬æä¾›ç»™å¤–éƒ¨ä½¿ç”¨æ—¶ã€‚</li><li>æ‰©å±•ï¼š<code>toRefs</code> ä¸<code>toRef</code>åŠŸèƒ½ä¸€è‡´ï¼Œä½†å¯ä»¥æ‰¹é‡åˆ›å»ºå¤šä¸ª ref å¯¹è±¡ï¼Œè¯­æ³•ï¼š<code>toRefs(person)</code></li></ul><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br></pre></td><td class="code"><pre><span class="line">&lt;template&gt;</span><br><span class="line">  &lt;div&gt;å§“åï¼š&#123;&#123; name &#125;&#125;&lt;/div&gt;</span><br><span class="line">  &lt;div&gt;å¹´é¾„ï¼š&#123;&#123; age &#125;&#125;&lt;/div&gt;</span><br><span class="line">  &lt;div&gt;èŒä¸šï¼š&#123;&#123; job.j1.type &#125;&#125;&lt;/div&gt;</span><br><span class="line">  &lt;div&gt;è–ªèµ„ï¼š&#123;&#123; job.j1.salary &#125;&#125;&lt;/div&gt;</span><br><span class="line">  &lt;div&gt;</span><br><span class="line">    å…´è¶£ï¼š&lt;span v-for=&quot;item in hobby&quot; :key=&quot;item&quot;&gt;&#123;&#123; item &#125;&#125;ï¼›&lt;/span&gt;</span><br><span class="line">  &lt;/div&gt;</span><br><span class="line">  &lt;button @click=&quot;sayHello()&quot;&gt;Appç»„ä»¶çš„æŒ‰é’®&lt;/button&gt;</span><br><span class="line">&lt;/template&gt;</span><br><span class="line"></span><br><span class="line">&lt;script&gt;</span><br><span class="line">import &#123; toRefs, reactive &#125; from &quot;vue&quot;;</span><br><span class="line"></span><br><span class="line">export default &#123;</span><br><span class="line">  name: &quot;toRefToRefs&amp;toRefs&quot;,</span><br><span class="line">  setup() &#123;</span><br><span class="line">    const data = reactive(&#123;</span><br><span class="line">      name: &quot;å¼ ä¸‰&quot;,</span><br><span class="line">      age: 18,</span><br><span class="line">      job: &#123;</span><br><span class="line">        j1: &#123;</span><br><span class="line">          type: &quot;å‰ç«¯å¼€å‘å·¥ç¨‹å¸ˆ&quot;,</span><br><span class="line">          salary: &quot;30K&quot;,</span><br><span class="line">        &#125;,</span><br><span class="line">      &#125;,</span><br><span class="line">      hobby: [&quot;æŠ½çƒŸ&quot;, &quot;å–é…’&quot;, &quot;çƒ«å¤´&quot;],</span><br><span class="line">    &#125;);</span><br><span class="line">    function sayHello() &#123;</span><br><span class="line">      data.name = &quot;æå››&quot;;</span><br><span class="line">      data.age = &quot;9&quot;;</span><br><span class="line">      data.job.j1.type = &quot;UIè®¾è®¡å¸ˆ&quot;;</span><br><span class="line">      data.job.j1.salary = &quot;10K&quot;;</span><br><span class="line">      data.hobby[0] = &quot;å”±æ­Œ&quot;;</span><br><span class="line">    &#125;</span><br><span class="line">    return &#123;</span><br><span class="line">      ...toRefs(data),</span><br><span class="line">      sayHello,</span><br><span class="line">    &#125;;</span><br><span class="line">  &#125;,</span><br><span class="line">&#125;;</span><br><span class="line">&lt;/script&gt;</span><br></pre></td></tr></table></figure><h2 id="è®¡ç®—å±æ€§ä¸ç›‘è§†"><a href="#è®¡ç®—å±æ€§ä¸ç›‘è§†" class="headerlink" title="è®¡ç®—å±æ€§ä¸ç›‘è§†"></a>è®¡ç®—å±æ€§ä¸ç›‘è§†</h2><h3 id="1-computed-å‡½æ•°"><a href="#1-computed-å‡½æ•°" class="headerlink" title="1.computed å‡½æ•°"></a>1.computed å‡½æ•°</h3><ul><li>ä¸ Vue2.x ä¸­ computed é…ç½®åŠŸèƒ½ä¸€è‡´</li><li>å†™æ³•</li></ul><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> &#123;computed&#125; <span class="keyword">from</span> <span class="string">&#x27;vue&#x27;</span></span><br><span class="line"></span><br><span class="line"><span class="title function_">setup</span>(<span class="params"></span>)&#123;</span><br><span class="line">    ...</span><br><span class="line">	<span class="comment">//è®¡ç®—å±æ€§â€”â€”ç®€å†™</span></span><br><span class="line">    <span class="keyword">let</span> fullName = <span class="title function_">computed</span>(<span class="function">()=&gt;</span>&#123;</span><br><span class="line">        <span class="keyword">return</span> person.<span class="property">firstName</span> + <span class="string">&#x27;-&#x27;</span> + person.<span class="property">lastName</span></span><br><span class="line">    &#125;)</span><br><span class="line">    <span class="comment">//è®¡ç®—å±æ€§â€”â€”å®Œæ•´</span></span><br><span class="line">    <span class="keyword">let</span> fullName = <span class="title function_">computed</span>(&#123;</span><br><span class="line">        <span class="title function_">get</span>(<span class="params"></span>)&#123;</span><br><span class="line">            <span class="keyword">return</span> person.<span class="property">firstName</span> + <span class="string">&#x27;-&#x27;</span> + person.<span class="property">lastName</span></span><br><span class="line">        &#125;,</span><br><span class="line">        <span class="title function_">set</span>(<span class="params">value</span>)&#123;</span><br><span class="line">            <span class="keyword">const</span> nameArr = value.<span class="title function_">split</span>(<span class="string">&#x27;-&#x27;</span>)</span><br><span class="line">            person.<span class="property">firstName</span> = nameArr[<span class="number">0</span>]</span><br><span class="line">            person.<span class="property">lastName</span> = nameArr[<span class="number">1</span>]</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;)</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h3 id="2-watch-å‡½æ•°"><a href="#2-watch-å‡½æ•°" class="headerlink" title="2.watch å‡½æ•°"></a>2.watch å‡½æ•°</h3><ul><li>ä¸ Vue2.x ä¸­ watch é…ç½®åŠŸèƒ½ä¸€è‡´</li><li>ä¸¤ä¸ªå°â€œå‘â€ï¼š<ul><li>ç›‘è§† reactive å®šä¹‰çš„å“åº”å¼æ•°æ®æ—¶ï¼šoldValue æ— æ³•æ­£ç¡®è·å–ã€å¼ºåˆ¶å¼€å¯äº†æ·±åº¦ç›‘è§†ï¼ˆdeep é…ç½®å¤±æ•ˆï¼‰ã€‚</li><li>ç›‘è§† reactive å®šä¹‰çš„å“åº”å¼æ•°æ®ä¸­æŸä¸ªå±æ€§æ—¶ï¼šdeep é…ç½®æœ‰æ•ˆã€‚</li></ul></li></ul><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//æƒ…å†µä¸€ï¼šç›‘è§†refå®šä¹‰çš„å“åº”å¼æ•°æ®</span></span><br><span class="line"><span class="title function_">watch</span>(</span><br><span class="line">  sum,</span><br><span class="line">  <span class="function">(<span class="params">newValue, oldValue</span>) =&gt;</span> &#123;</span><br><span class="line">    <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&quot;sumå˜åŒ–äº†&quot;</span>, newValue, oldValue);</span><br><span class="line">  &#125;,</span><br><span class="line">  &#123; <span class="attr">immediate</span>: <span class="literal">true</span> &#125;</span><br><span class="line">);</span><br><span class="line"></span><br><span class="line"><span class="comment">//æƒ…å†µäºŒï¼šç›‘è§†å¤šä¸ªrefå®šä¹‰çš„å“åº”å¼æ•°æ®</span></span><br><span class="line"><span class="title function_">watch</span>([sum, msg], <span class="function">(<span class="params">newValue, oldValue</span>) =&gt;</span> &#123;</span><br><span class="line">  <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&quot;sumæˆ–msgå˜åŒ–äº†&quot;</span>, newValue, oldValue);</span><br><span class="line">&#125;);</span><br><span class="line"></span><br><span class="line"><span class="comment">/* æƒ…å†µä¸‰ï¼šç›‘è§†reactiveå®šä¹‰çš„å“åº”å¼æ•°æ®</span></span><br><span class="line"><span class="comment">			è‹¥watchç›‘è§†çš„æ˜¯reactiveå®šä¹‰çš„å“åº”å¼æ•°æ®ï¼Œåˆ™æ— æ³•æ­£ç¡®è·å¾—oldValueï¼ï¼</span></span><br><span class="line"><span class="comment">			è‹¥watchç›‘è§†çš„æ˜¯reactiveå®šä¹‰çš„å“åº”å¼æ•°æ®ï¼Œåˆ™å¼ºåˆ¶å¼€å¯äº†æ·±åº¦ç›‘è§† </span></span><br><span class="line"><span class="comment">*/</span></span><br><span class="line"><span class="title function_">watch</span>(</span><br><span class="line">  person,</span><br><span class="line">  <span class="function">(<span class="params">newValue, oldValue</span>) =&gt;</span> &#123;</span><br><span class="line">    <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&quot;personå˜åŒ–äº†&quot;</span>, newValue, oldValue);</span><br><span class="line">  &#125;,</span><br><span class="line">  &#123; <span class="attr">immediate</span>: <span class="literal">true</span> &#125;</span><br><span class="line">); <span class="comment">//æ­¤å¤„çš„deepé…ç½®ä¸å†å¥æ•ˆ</span></span><br><span class="line"></span><br><span class="line"><span class="comment">//æƒ…å†µå››ï¼šç›‘è§†reactiveå®šä¹‰çš„å“åº”å¼æ•°æ®ä¸­çš„æŸä¸ªå±æ€§</span></span><br><span class="line"><span class="title function_">watch</span>(</span><br><span class="line">  <span class="function">() =&gt;</span> person.<span class="property">job</span>,</span><br><span class="line">  <span class="function">(<span class="params">newValue, oldValue</span>) =&gt;</span> &#123;</span><br><span class="line">    <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&quot;personçš„jobå˜åŒ–äº†&quot;</span>, newValue, oldValue);</span><br><span class="line">  &#125;,</span><br><span class="line">  &#123; <span class="attr">immediate</span>: <span class="literal">true</span>, <span class="attr">deep</span>: <span class="literal">true</span> &#125;</span><br><span class="line">);</span><br><span class="line"></span><br><span class="line"><span class="comment">//æƒ…å†µäº”ï¼šç›‘è§†reactiveå®šä¹‰çš„å“åº”å¼æ•°æ®ä¸­çš„æŸäº›å±æ€§</span></span><br><span class="line"><span class="title function_">watch</span>(</span><br><span class="line">  [<span class="function">() =&gt;</span> person.<span class="property">job</span>, <span class="function">() =&gt;</span> person.<span class="property">name</span>],</span><br><span class="line">  <span class="function">(<span class="params">newValue, oldValue</span>) =&gt;</span> &#123;</span><br><span class="line">    <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&quot;personçš„jobå˜åŒ–äº†&quot;</span>, newValue, oldValue);</span><br><span class="line">  &#125;,</span><br><span class="line">  &#123; <span class="attr">immediate</span>: <span class="literal">true</span>, <span class="attr">deep</span>: <span class="literal">true</span> &#125;</span><br><span class="line">);</span><br><span class="line"></span><br><span class="line"><span class="comment">//ç‰¹æ®Šæƒ…å†µ</span></span><br><span class="line"><span class="title function_">watch</span>(</span><br><span class="line">  <span class="function">() =&gt;</span> person.<span class="property">job</span>,</span><br><span class="line">  <span class="function">(<span class="params">newValue, oldValue</span>) =&gt;</span> &#123;</span><br><span class="line">    <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&quot;personçš„jobå˜åŒ–äº†&quot;</span>, newValue, oldValue);</span><br><span class="line">  &#125;,</span><br><span class="line">  &#123; <span class="attr">deep</span>: <span class="literal">true</span> &#125;</span><br><span class="line">); <span class="comment">//æ­¤å¤„ç”±äºç›‘è§†çš„æ˜¯reactiveç´ å®šä¹‰çš„å¯¹è±¡ä¸­çš„æŸä¸ªå±æ€§ï¼Œæ‰€ä»¥deepé…ç½®æœ‰æ•ˆ</span></span><br></pre></td></tr></table></figure><h3 id="3-watchEffect-å‡½æ•°"><a href="#3-watchEffect-å‡½æ•°" class="headerlink" title="3.watchEffect å‡½æ•°"></a>3.watchEffect å‡½æ•°</h3><ul><li>watch çš„å¥—è·¯æ˜¯ï¼šæ—¢è¦æŒ‡æ˜ç›‘è§†çš„å±æ€§ï¼Œä¹Ÿè¦æŒ‡æ˜ç›‘è§†çš„å›è°ƒã€‚</li><li>watchEffect çš„å¥—è·¯æ˜¯ï¼šä¸ç”¨æŒ‡æ˜ç›‘è§†å“ªä¸ªå±æ€§ï¼Œç›‘è§†çš„å›è°ƒä¸­ç”¨åˆ°å“ªä¸ªå±æ€§ï¼Œé‚£å°±ç›‘è§†å“ªä¸ªå±æ€§ã€‚</li><li>watchEffect æœ‰ç‚¹åƒ computedï¼š<ul><li>ä½† computed æ³¨é‡çš„è®¡ç®—å‡ºæ¥çš„å€¼ï¼ˆå›è°ƒå‡½æ•°çš„è¿”å›å€¼ï¼‰ï¼Œæ‰€ä»¥å¿…é¡»è¦å†™è¿”å›å€¼ã€‚</li><li>è€Œ watchEffect æ›´æ³¨é‡çš„æ˜¯è¿‡ç¨‹ï¼ˆå›è°ƒå‡½æ•°çš„å‡½æ•°ä½“ï¼‰ï¼Œæ‰€ä»¥ä¸ç”¨å†™è¿”å›å€¼ã€‚</li></ul></li></ul><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//watchEffectæ‰€æŒ‡å®šçš„å›è°ƒä¸­ç”¨åˆ°çš„æ•°æ®åªè¦å‘ç”Ÿå˜åŒ–ï¼Œåˆ™ç›´æ¥é‡æ–°æ‰§è¡Œå›è°ƒã€‚</span></span><br><span class="line"><span class="title function_">watchEffect</span>(<span class="function">() =&gt;</span> &#123;</span><br><span class="line">  <span class="keyword">const</span> x1 = sum.<span class="property">value</span>;</span><br><span class="line">  <span class="keyword">const</span> x2 = person.<span class="property">age</span>;</span><br><span class="line">  <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&quot;watchEffecté…ç½®çš„å›è°ƒæ‰§è¡Œäº†&quot;</span>);</span><br><span class="line">&#125;);</span><br></pre></td></tr></table></figure><h2 id="å…¶ä»–å˜åŒ–"><a href="#å…¶ä»–å˜åŒ–" class="headerlink" title="å…¶ä»–å˜åŒ–"></a>å…¶ä»–å˜åŒ–</h2><h3 id="1-å…¨å±€-API-çš„è½¬ç§»"><a href="#1-å…¨å±€-API-çš„è½¬ç§»" class="headerlink" title="1.å…¨å±€ API çš„è½¬ç§»"></a>1.å…¨å±€ API çš„è½¬ç§»</h3><ul><li>Vue 2.x æœ‰è®¸å¤šå…¨å±€ API å’Œé…ç½®ã€‚<ul><li>ä¾‹å¦‚ï¼šæ³¨å†Œå…¨å±€ç»„ä»¶ã€æ³¨å†Œå…¨å±€æŒ‡ä»¤ç­‰ã€‚</li></ul></li></ul><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//æ³¨å†Œå…¨å±€ç»„ä»¶</span></span><br><span class="line"><span class="title class_">Vue</span>.<span class="title function_">component</span>(<span class="string">&#x27;MyButton&#x27;</span>, &#123;</span><br><span class="line">  <span class="attr">data</span>: <span class="function">() =&gt;</span> (&#123;</span><br><span class="line">    <span class="attr">count</span>: <span class="number">0</span></span><br><span class="line">  &#125;),</span><br><span class="line">  <span class="attr">template</span>: <span class="string">&#x27;&lt;button @click=&quot;count++&quot;&gt;Clicked &#123;&#123; count &#125;&#125; times.&lt;/button&gt;&#x27;</span></span><br><span class="line">&#125;)</span><br><span class="line"></span><br><span class="line"><span class="comment">//æ³¨å†Œå…¨å±€æŒ‡ä»¤</span></span><br><span class="line"><span class="title class_">Vue</span>.<span class="title function_">directive</span>(<span class="string">&#x27;focus&#x27;</span>, &#123;</span><br><span class="line">  <span class="attr">inserted</span>: <span class="function"><span class="params">el</span> =&gt;</span> el.<span class="title function_">focus</span>()</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><ul><li>Vue3.0 ä¸­å¯¹è¿™äº› API åšå‡ºäº†è°ƒæ•´ï¼š<ul><li>å°†å…¨å±€çš„ APIï¼Œå³ï¼š<code>Vue.xxx</code>è°ƒæ•´åˆ°åº”ç”¨å®ä¾‹ï¼ˆ<code>app</code>ï¼‰ä¸Š<br>| 2.x å…¨å±€ APIï¼ˆ<code>Vue</code><br>ï¼‰ | 3.x å®ä¾‹ API (<code>app</code><br>) |<br>| â€” | â€” |<br>| Vue.config.xxxx | app.config.xxxx |<br>| Vue.config.productionTip | <strong>ç§»é™¤</strong> |<br>| Vue.component | app.component |<br>| Vue.directive | app.directive |<br>| Vue.mixin | app.mixin |<br>| Vue.use | app.use |<br>| Vue.prototype | app.config.globalProperties |</li></ul></li></ul><h3 id="2-å…¶ä»–æ”¹å˜"><a href="#2-å…¶ä»–æ”¹å˜" class="headerlink" title="2.å…¶ä»–æ”¹å˜"></a>2.å…¶ä»–æ”¹å˜</h3><ul><li>data é€‰é¡¹åº”å§‹ç»ˆè¢«å£°æ˜ä¸ºä¸€ä¸ªå‡½æ•°ã€‚</li><li>è¿‡åº¦ç±»åçš„æ›´æ”¹ï¼š<ul><li>Vue2.x å†™æ³•</li></ul></li></ul><figure class="highlight css"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="selector-class">.v-enter</span>,</span><br><span class="line"><span class="selector-class">.v-leave-to</span> &#123;</span><br><span class="line">  <span class="attribute">opacity</span>: <span class="number">0</span>;</span><br><span class="line">&#125;</span><br><span class="line"><span class="selector-class">.v-leave</span>,</span><br><span class="line"><span class="selector-class">.v-enter-to</span> &#123;</span><br><span class="line">  <span class="attribute">opacity</span>: <span class="number">1</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><ul><li>Vue3.x å†™æ³•</li></ul><figure class="highlight css"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="selector-class">.v-enter-from</span>,</span><br><span class="line"><span class="selector-class">.v-leave-to</span> &#123;</span><br><span class="line">  <span class="attribute">opacity</span>: <span class="number">0</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="selector-class">.v-leave-from</span>,</span><br><span class="line"><span class="selector-class">.v-enter-to</span> &#123;</span><br><span class="line">  <span class="attribute">opacity</span>: <span class="number">1</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><ul><li><strong>ç§»é™¤</strong>keyCode ä½œä¸º v-on çš„ä¿®é¥°ç¬¦ï¼ŒåŒæ—¶ä¹Ÿä¸å†æ”¯æŒ<code>config.keyCodes</code></li><li><strong>ç§»é™¤</strong><code>v-on.native</code>ä¿®é¥°ç¬¦<ul><li>çˆ¶ç»„ä»¶ä¸­ç»‘å®šäº‹ä»¶</li></ul></li></ul><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">&lt;my-component</span><br><span class="line">  v-on:close=&quot;handleComponentEvent&quot;</span><br><span class="line">  v-on:click=&quot;handleNativeClickEvent&quot;</span><br><span class="line">/&gt;</span><br></pre></td></tr></table></figure><ul><li>å­ç»„ä»¶ä¸­å£°æ˜è‡ªå®šä¹‰äº‹ä»¶</li></ul><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">&lt;script&gt;</span><br><span class="line">export default &#123;</span><br><span class="line">  emits: [&quot;close&quot;],</span><br><span class="line">&#125;;</span><br><span class="line">&lt;/script&gt;</span><br></pre></td></tr></table></figure><ul><li><strong>ç§»é™¤</strong>è¿‡æ»¤å™¨ï¼ˆfilterï¼‰<blockquote><p>è¿‡æ»¤å™¨è™½ç„¶è¿™çœ‹èµ·æ¥å¾ˆæ–¹ä¾¿ï¼Œä½†å®ƒéœ€è¦ä¸€ä¸ªè‡ªå®šä¹‰è¯­æ³•ï¼Œæ‰“ç ´å¤§æ‹¬å·å†…è¡¨è¾¾å¼æ˜¯ â€œåªæ˜¯ JavaScriptâ€ çš„å‡è®¾ï¼Œè¿™ä¸ä»…æœ‰å­¦ä¹ æˆæœ¬ï¼Œè€Œä¸”æœ‰å®ç°æˆæœ¬ï¼å»ºè®®ç”¨æ–¹æ³•è°ƒç”¨æˆ–è®¡ç®—å±æ€§å»æ›¿æ¢è¿‡æ»¤å™¨ã€‚</p></blockquote></li></ul><h2 id="æ–°çš„ç»„ä»¶"><a href="#æ–°çš„ç»„ä»¶" class="headerlink" title="æ–°çš„ç»„ä»¶"></a>æ–°çš„ç»„ä»¶</h2><h3 id="1-Fragment"><a href="#1-Fragment" class="headerlink" title="1.Fragment"></a>1.Fragment</h3><ul><li>åœ¨ Vue2 ä¸­: ç»„ä»¶å¿…é¡»æœ‰ä¸€ä¸ªæ ¹æ ‡ç­¾</li><li>åœ¨ Vue3 ä¸­: ç»„ä»¶å¯ä»¥æ²¡æœ‰æ ¹æ ‡ç­¾, å†…éƒ¨ä¼šå°†å¤šä¸ªæ ‡ç­¾åŒ…å«åœ¨ä¸€ä¸ª Fragment è™šæ‹Ÿå…ƒç´ ä¸­</li><li>å¥½å¤„: å‡å°‘æ ‡ç­¾å±‚çº§, å‡å°å†…å­˜å ç”¨</li></ul><h3 id="2-Teleport"><a href="#2-Teleport" class="headerlink" title="2.Teleport"></a>2.Teleport</h3><ul><li>ä»€ä¹ˆæ˜¯ Teleportï¼Ÿâ€”â€” <code>Teleport</code> æ˜¯ä¸€ç§èƒ½å¤Ÿå°†æˆ‘ä»¬çš„<strong>ç»„ä»¶ html ç»“æ„</strong>ç§»åŠ¨åˆ°æŒ‡å®šä½ç½®çš„æŠ€æœ¯ã€‚</li></ul><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">&lt;teleport to=&quot;ç§»åŠ¨ä½ç½®&quot;&gt;</span><br><span class="line">	&lt;div v-if=&quot;isShow&quot; class=&quot;mask&quot;&gt;</span><br><span class="line">		&lt;div class=&quot;dialog&quot;&gt;</span><br><span class="line">			&lt;h3&gt;æˆ‘æ˜¯ä¸€ä¸ªå¼¹çª—&lt;/h3&gt;</span><br><span class="line">			&lt;button @click=&quot;isShow = false&quot;&gt;å…³é—­å¼¹çª—&lt;/button&gt;</span><br><span class="line">		&lt;/div&gt;</span><br><span class="line">	&lt;/div&gt;</span><br><span class="line">&lt;/teleport&gt;</span><br></pre></td></tr></table></figure><h3 id="3-Suspense"><a href="#3-Suspense" class="headerlink" title="3.Suspense"></a>3.Suspense</h3><ul><li>ç­‰å¾…å¼‚æ­¥ç»„ä»¶æ—¶æ¸²æŸ“ä¸€äº›é¢å¤–å†…å®¹ï¼Œè®©åº”ç”¨æœ‰æ›´å¥½çš„ç”¨æˆ·ä½“éªŒ</li><li>ä½¿ç”¨æ­¥éª¤ï¼š</li><li>å¼‚æ­¥å¼•å…¥ç»„ä»¶</li></ul><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> &#123; defineAsyncComponent &#125; <span class="keyword">from</span> <span class="string">&quot;vue&quot;</span>;</span><br><span class="line"><span class="keyword">const</span> <span class="title class_">Child</span> = <span class="title function_">defineAsyncComponent</span>(<span class="function">() =&gt;</span> <span class="keyword">import</span>(<span class="string">&quot;./components/Child.vue&quot;</span>));</span><br></pre></td></tr></table></figure><ul><li>ä½¿ç”¨<code>Suspense</code>åŒ…è£¹ç»„ä»¶ï¼Œå¹¶é…ç½®å¥½<code>default</code> ä¸ <code>fallback</code></li></ul><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line">&lt;template&gt;</span><br><span class="line">  &lt;div class=&quot;app&quot;&gt;</span><br><span class="line">    &lt;h3&gt;æˆ‘æ˜¯Appç»„ä»¶&lt;/h3&gt;</span><br><span class="line">    &lt;Suspense&gt;</span><br><span class="line">      &lt;template v-slot:default&gt;</span><br><span class="line">        &lt;Child /&gt;</span><br><span class="line">      &lt;/template&gt;</span><br><span class="line">      &lt;template v-slot:fallback&gt;</span><br><span class="line">        &lt;h3&gt;åŠ è½½ä¸­.....&lt;/h3&gt;</span><br><span class="line">      &lt;/template&gt;</span><br><span class="line">    &lt;/Suspense&gt;</span><br><span class="line">  &lt;/div&gt;</span><br><span class="line">&lt;/template&gt;</span><br></pre></td></tr></table></figure></div><div class="post-copyright-info-container border-box"><div class="copyright-info-content border-box"><div class="copyright-info-top border-box"><div class="copyright-post-title border-box text-ellipsis">ä»€ä¹ˆæ˜¯vue3</div><div class="copyright-post-link border-box text-ellipsis">2023/09/29/vue3/ä»€ä¹ˆæ˜¯vue3/</div></div><div class="copyright-info-bottom border-box"><div class="copyright-post-author bottom-item"><div class="type">ä½œè€…</div><div class="content">gml</div></div><div class="post-time bottom-item"><div class="type">å‘å¸ƒäº</div><div class="content">2023-09-29 11:57</div></div><div class="post-license bottom-item"><div class="type">è®¸å¯</div><div class="content tooltip" data-tooltip-content="CC BY-NC-SA 4.0"><a href="https://creativecommons.org/licenses/by-nc-sa/4.0/deed.zh-hans" target="_blank"><i class="fa-brands fa-creative-commons"></i> <i class="fa-brands fa-creative-commons-by"></i> <i class="fa-brands fa-creative-commons-nc"></i> <i class="fa-brands fa-creative-commons-sa"></i></a></div></div></div><i class="copyright-bg fa-solid fa-copyright"></i></div><div class="copy-copyright-info flex-center tooltip" data-tooltip-content="å¤åˆ¶ç‰ˆæƒä¿¡æ¯" data-tooltip-offset-y="-2px"><i class="fa-solid fa-copy"></i></div></div><div class="post-bottom-tags-and-share border-box"><div><ul class="post-tags-box border-box"><li class="tag-item border-box"><i class="icon fas fa-hashtag"></i>&nbsp;<a href="/blog/tags/%E5%89%8D%E7%AB%AF/">å‰ç«¯</a></li><li class="tag-item border-box"><i class="icon fas fa-hashtag"></i>&nbsp;<a href="/blog/tags/vue3/">vue3</a></li><li class="tag-item border-box"><i class="icon fas fa-hashtag"></i>&nbsp;<a href="/blog/tags/vue/">vue</a></li></ul></div><div><div class="post-share-container border-box"><ul class="share-list-wrap border-box"><li class="qq share-item border-box flex-center tooltip" data-tooltip-content="åˆ†äº«åˆ° QQ"><i class="fa-brands fa-qq"></i></li><li class="wechat share-item border-box flex-center tooltip tooltip-img" data-tooltip-content="åˆ†äº«åˆ°å¾®ä¿¡" data-tooltip-img-tip="å¾®ä¿¡æ‰«ä¸€æ‰«" data-tooltip-img-style="background-color: #fff; top: -10px; padding: 0.6rem 0.6rem 0.1rem 0.6rem;"><i class="fa-brands fa-weixin"></i></li><li class="weibo share-item border-box flex-center tooltip" data-tooltip-content="åˆ†äº«åˆ°å¾®åš"><i class="fa-brands fa-weibo"></i></li></ul></div></div></div><div class="reward-author-container border-box flex-center"><div class="reward-btn keep-button border-box flex-center tooltip tooltip-img" data-tooltip-content="è¯·ä½œè€…å’Œå¥¶èŒ¶ğŸ¥¤" data-tooltip-img-url="/images/IMG_2781.PNG" data-tooltip-img-trigger="click" data-tooltip-img-style="top: -8px;"><i class="fa-solid fa-hand-holding-heart"></i></div></div><div class="post-nav border-box"><div class="prev-post"><a class="prev" rel="prev" href="/blog/2023/09/29/vue3/%E5%A6%82%E4%BD%95%E4%B8%BAVue3%E7%BB%84%E4%BB%B6%E6%A0%87%E6%B3%A8TS%E7%B1%BB%E5%9E%8B/" title="å¦‚ä½•ä¸ºVue3ç»„ä»¶æ ‡æ³¨TSç±»å‹"><span class="left arrow-icon flex-center"><i class="fas fa-chevron-left"></i> </span><span class="title flex-center"><span class="post-nav-title-item text-ellipsis">å¦‚ä½•ä¸ºVue3ç»„ä»¶æ ‡æ³¨TSç±»å‹</span> <span class="post-nav-item">ä¸Šä¸€ç¯‡</span></span></a></div><div class="next-post"><a class="next" rel="next" href="/blog/2023/09/29/vue3/%E8%87%AA%E5%AE%9A%E4%B9%89hook%E5%87%BD%E6%95%B0/" title="è‡ªå®šä¹‰hookå‡½æ•°"><span class="title flex-center"><span class="post-nav-title-item text-ellipsis">è‡ªå®šä¹‰hookå‡½æ•°</span> <span class="post-nav-item">ä¸‹ä¸€ç¯‡</span> </span><span class="right arrow-icon flex-center"><i class="fas fa-chevron-right"></i></span></a></div></div></div></div><div class="pc-post-toc right-toc"><div class="post-toc-wrap border-box"><div class="post-toc border-box"><ol class="nav"><li class="nav-item nav-level-2"><a class="nav-link" href="#1-Vue3-%E7%AE%80%E4%BB%8B"><span class="nav-number">1.</span> <span class="nav-text">1.Vue3 ç®€ä»‹</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#2-Vue3-%E5%B8%A6%E6%9D%A5%E4%BA%86%E4%BB%80%E4%B9%88"><span class="nav-number">2.</span> <span class="nav-text">2.Vue3 å¸¦æ¥äº†ä»€ä¹ˆ</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#1-%E6%80%A7%E8%83%BD%E7%9A%84%E6%8F%90%E5%8D%87"><span class="nav-number">2.1.</span> <span class="nav-text">1.æ€§èƒ½çš„æå‡</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#2-%E6%BA%90%E7%A0%81%E7%9A%84%E5%8D%87%E7%BA%A7"><span class="nav-number">2.2.</span> <span class="nav-text">2.æºç çš„å‡çº§</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#3-%E6%8B%A5%E6%8A%B1-TypeScript"><span class="nav-number">2.3.</span> <span class="nav-text">3.æ‹¥æŠ± TypeScript</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#4-%E6%96%B0%E7%9A%84%E7%89%B9%E6%80%A7"><span class="nav-number">2.4.</span> <span class="nav-text">4.æ–°çš„ç‰¹æ€§</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#%E4%B8%80%E3%80%81%E5%88%9B%E5%BB%BA-Vue3-0-%E5%B7%A5%E7%A8%8B"><span class="nav-number">2.5.</span> <span class="nav-text">ä¸€ã€åˆ›å»º Vue3.0 å·¥ç¨‹</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#1-%E4%BD%BF%E7%94%A8-vue-cli-%E5%88%9B%E5%BB%BA"><span class="nav-number">2.6.</span> <span class="nav-text">1.ä½¿ç”¨ vue-cli åˆ›å»º</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#2-%E4%BD%BF%E7%94%A8-vite-%E5%88%9B%E5%BB%BA"><span class="nav-number">2.7.</span> <span class="nav-text">2.ä½¿ç”¨ vite åˆ›å»º</span></a></li></ol></li><li class="nav-item nav-level-2"><a class="nav-link" href="#%E5%B8%B8%E7%94%A8-CompositionAPI"><span class="nav-number">3.</span> <span class="nav-text">å¸¸ç”¨ CompositionAPI</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#1-%E6%8B%89%E5%BC%80%E5%BA%8F%E5%B9%95%E7%9A%84-setup"><span class="nav-number">3.1.</span> <span class="nav-text">1.æ‹‰å¼€åºå¹•çš„ setup</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#2-ref-%E5%87%BD%E6%95%B0"><span class="nav-number">3.2.</span> <span class="nav-text">2.ref å‡½æ•°</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#3-reactive-%E5%87%BD%E6%95%B0"><span class="nav-number">3.3.</span> <span class="nav-text">3.reactive å‡½æ•°</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#4-Vue3-0-%E4%B8%AD%E7%9A%84%E5%93%8D%E5%BA%94%E5%BC%8F%E5%8E%9F%E7%90%86"><span class="nav-number">3.4.</span> <span class="nav-text">4.Vue3.0 ä¸­çš„å“åº”å¼åŸç†</span></a><ol class="nav-child"><li class="nav-item nav-level-4"><a class="nav-link" href="#vue2-x-%E7%9A%84%E5%93%8D%E5%BA%94%E5%BC%8F"><span class="nav-number">3.4.1.</span> <span class="nav-text">vue2.x çš„å“åº”å¼</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#Vue3-0-%E7%9A%84%E5%93%8D%E5%BA%94%E5%BC%8F"><span class="nav-number">3.4.2.</span> <span class="nav-text">Vue3.0 çš„å“åº”å¼</span></a></li></ol></li><li class="nav-item nav-level-3"><a class="nav-link" href="#5-reactive-%E5%AF%B9%E6%AF%94-ref"><span class="nav-number">3.5.</span> <span class="nav-text">5.reactive å¯¹æ¯” ref</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#6-setup-%E7%9A%84%E4%B8%A4%E4%B8%AA%E6%B3%A8%E6%84%8F%E7%82%B9"><span class="nav-number">3.6.</span> <span class="nav-text">6.setup çš„ä¸¤ä¸ªæ³¨æ„ç‚¹</span></a></li></ol></li><li class="nav-item nav-level-2"><a class="nav-link" href="#%E5%85%B6%E5%AE%83-CompositionAPI"><span class="nav-number">4.</span> <span class="nav-text">å…¶å®ƒ CompositionAPI</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#shallowReactive-%E4%B8%8E-shallowRef"><span class="nav-number">4.1.</span> <span class="nav-text">shallowReactive ä¸ shallowRef</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#readonly-%E4%B8%8E-shallowReadonly"><span class="nav-number">4.2.</span> <span class="nav-text">readonly ä¸ shallowReadonly</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#toRaw-%E4%B8%8E-markRaw"><span class="nav-number">4.3.</span> <span class="nav-text">toRaw ä¸ markRaw</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#customRef"><span class="nav-number">4.4.</span> <span class="nav-text">customRef</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#provide-%E4%B8%8E-inject"><span class="nav-number">4.5.</span> <span class="nav-text">provide ä¸ inject</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#%E5%93%8D%E5%BA%94%E5%BC%8F%E6%95%B0%E6%8D%AE%E7%9A%84%E5%88%A4%E6%96%AD"><span class="nav-number">4.6.</span> <span class="nav-text">å“åº”å¼æ•°æ®çš„åˆ¤æ–­</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#getCurrentInstance"><span class="nav-number">4.7.</span> <span class="nav-text">getCurrentInstance</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#Composition-API-%E7%9A%84%E4%BC%98%E5%8A%BF"><span class="nav-number">4.8.</span> <span class="nav-text">Composition API çš„ä¼˜åŠ¿</span></a><ol class="nav-child"><li class="nav-item nav-level-4"><a class="nav-link" href="#Options-API-%E5%AD%98%E5%9C%A8%E7%9A%84%E9%97%AE%E9%A2%98"><span class="nav-number">4.8.1.</span> <span class="nav-text">Options API å­˜åœ¨çš„é—®é¢˜</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#Composition-API-%E7%9A%84%E4%BC%98%E5%8A%BF-1"><span class="nav-number">4.8.2.</span> <span class="nav-text">Composition API çš„ä¼˜åŠ¿</span></a></li></ol></li></ol></li><li class="nav-item nav-level-2"><a class="nav-link" href="#%E7%94%9F%E5%91%BD%E5%91%A8%E6%9C%9F"><span class="nav-number">5.</span> <span class="nav-text">ç”Ÿå‘½å‘¨æœŸ</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#toRef"><span class="nav-number">6.</span> <span class="nav-text">toRef</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#%E8%AE%A1%E7%AE%97%E5%B1%9E%E6%80%A7%E4%B8%8E%E7%9B%91%E8%A7%86"><span class="nav-number">7.</span> <span class="nav-text">è®¡ç®—å±æ€§ä¸ç›‘è§†</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#1-computed-%E5%87%BD%E6%95%B0"><span class="nav-number">7.1.</span> <span class="nav-text">1.computed å‡½æ•°</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#2-watch-%E5%87%BD%E6%95%B0"><span class="nav-number">7.2.</span> <span class="nav-text">2.watch å‡½æ•°</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#3-watchEffect-%E5%87%BD%E6%95%B0"><span class="nav-number">7.3.</span> <span class="nav-text">3.watchEffect å‡½æ•°</span></a></li></ol></li><li class="nav-item nav-level-2"><a class="nav-link" href="#%E5%85%B6%E4%BB%96%E5%8F%98%E5%8C%96"><span class="nav-number">8.</span> <span class="nav-text">å…¶ä»–å˜åŒ–</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#1-%E5%85%A8%E5%B1%80-API-%E7%9A%84%E8%BD%AC%E7%A7%BB"><span class="nav-number">8.1.</span> <span class="nav-text">1.å…¨å±€ API çš„è½¬ç§»</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#2-%E5%85%B6%E4%BB%96%E6%94%B9%E5%8F%98"><span class="nav-number">8.2.</span> <span class="nav-text">2.å…¶ä»–æ”¹å˜</span></a></li></ol></li><li class="nav-item nav-level-2"><a class="nav-link" href="#%E6%96%B0%E7%9A%84%E7%BB%84%E4%BB%B6"><span class="nav-number">9.</span> <span class="nav-text">æ–°çš„ç»„ä»¶</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#1-Fragment"><span class="nav-number">9.1.</span> <span class="nav-text">1.Fragment</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#2-Teleport"><span class="nav-number">9.2.</span> <span class="nav-text">2.Teleport</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#3-Suspense"><span class="nav-number">9.3.</span> <span class="nav-text">3.Suspense</span></a></li></ol></li></ol></div></div></div></div></div></div></div><div class="page-main-content-bottom border-box"><footer class="footer border-box"><div class="border-box website-info-box default"><div class="copyright-info info-item default">&copy;&nbsp;<span>2020</span>&nbsp;-&nbsp;2024 &nbsp;<i class="fas fa-heart icon-animate"></i>&nbsp;&nbsp;<a href="/blog/">gml</a></div><div class="theme-info info-item default">ç”±&nbsp;<a target="_blank" href="https://hexo.io">Hexo</a>&nbsp;é©±åŠ¨&nbsp;&&nbsp;ä¸»é¢˜&nbsp;<a class="keep-version" target="_blank" href="https://github.com/XPoet/hexo-theme-keep">Keep</a></div><div class="count-item info-item default"><span class="count-box border-box uv"><span class="item-type border-box">è®¿å®¢æ•°</span> <span class="item-value border-box uv" id="busuanzi_value_site_uv"></span> </span><span class="count-box border-box pv"><span class="item-type border-box">è®¿é—®é‡</span> <span class="item-value border-box pv" id="busuanzi_value_site_pv"></span></span></div></div></footer></div></div><div class="post-tools right-toc"><div class="post-tools-container border-box"><ul class="tools-list border-box"><li class="tools-item flex-center toggle-show-toc"><i class="fas fa-list"></i></li><li class="tools-item flex-center full-screen"><i class="fa-solid fa-expand"></i></li></ul></div></div><div class="side-tools"><div class="side-tools-container border-box"><ul class="side-tools-list side-tools-show-handle border-box"><li class="tools-item tool-font-adjust-plus flex-center"><i class="fas fa-search-plus"></i></li><li class="tools-item tool-font-adjust-minus flex-center"><i class="fas fa-search-minus"></i></li><li class="tools-item tool-toggle-theme-mode flex-center"><i class="fas fa-moon"></i></li><li class="tools-item rss flex-center"><a class="flex-center" href="/atom.xml" target="_blank"><i class="fas fa-rss"></i></a></li><li class="tools-item tool-scroll-to-bottom flex-center"><i class="fas fa-arrow-down"></i></li></ul><ul class="exposed-tools-list border-box"><li class="tools-item toggle-show-toc-tablet flex-center"><i class="fas fa-list"></i></li><li class="tools-item tool-toggle-show flex-center"><i class="fas fa-cog fa-spin"></i></li><li class="tools-item tool-scroll-to-top flex-center show-arrow"><i class="arrow fas fa-arrow-up"></i> <span class="percent"></span></li></ul></div></div><div class="zoom-in-image-mask"><img class="zoom-in-image"></div><div class="search-pop-overlay"><div class="popup search-popup"><div class="search-header"><span class="search-input-field-pre"><i class="fas fa-keyboard"></i></span><div class="search-input-container"><input autocomplete="off" autocorrect="off" autocapitalize="off" placeholder="æœç´¢..." spellcheck="false" type="search" class="search-input"></div><span class="close-popup-btn"><i class="fas fa-times"></i></span></div><div id="search-result"><div id="no-result"><i class="fas fa-spinner fa-pulse fa-5x fa-fw"></i></div></div></div></div><div class="tablet-post-toc-mask"><div class="tablet-post-toc"><div class="post-toc-wrap border-box"><div class="post-toc border-box"><ol class="nav"><li class="nav-item nav-level-2"><a class="nav-link" href="#1-Vue3-%E7%AE%80%E4%BB%8B"><span class="nav-number">1.</span> <span class="nav-text">1.Vue3 ç®€ä»‹</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#2-Vue3-%E5%B8%A6%E6%9D%A5%E4%BA%86%E4%BB%80%E4%B9%88"><span class="nav-number">2.</span> <span class="nav-text">2.Vue3 å¸¦æ¥äº†ä»€ä¹ˆ</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#1-%E6%80%A7%E8%83%BD%E7%9A%84%E6%8F%90%E5%8D%87"><span class="nav-number">2.1.</span> <span class="nav-text">1.æ€§èƒ½çš„æå‡</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#2-%E6%BA%90%E7%A0%81%E7%9A%84%E5%8D%87%E7%BA%A7"><span class="nav-number">2.2.</span> <span class="nav-text">2.æºç çš„å‡çº§</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#3-%E6%8B%A5%E6%8A%B1-TypeScript"><span class="nav-number">2.3.</span> <span class="nav-text">3.æ‹¥æŠ± TypeScript</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#4-%E6%96%B0%E7%9A%84%E7%89%B9%E6%80%A7"><span class="nav-number">2.4.</span> <span class="nav-text">4.æ–°çš„ç‰¹æ€§</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#%E4%B8%80%E3%80%81%E5%88%9B%E5%BB%BA-Vue3-0-%E5%B7%A5%E7%A8%8B"><span class="nav-number">2.5.</span> <span class="nav-text">ä¸€ã€åˆ›å»º Vue3.0 å·¥ç¨‹</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#1-%E4%BD%BF%E7%94%A8-vue-cli-%E5%88%9B%E5%BB%BA"><span class="nav-number">2.6.</span> <span class="nav-text">1.ä½¿ç”¨ vue-cli åˆ›å»º</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#2-%E4%BD%BF%E7%94%A8-vite-%E5%88%9B%E5%BB%BA"><span class="nav-number">2.7.</span> <span class="nav-text">2.ä½¿ç”¨ vite åˆ›å»º</span></a></li></ol></li><li class="nav-item nav-level-2"><a class="nav-link" href="#%E5%B8%B8%E7%94%A8-CompositionAPI"><span class="nav-number">3.</span> <span class="nav-text">å¸¸ç”¨ CompositionAPI</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#1-%E6%8B%89%E5%BC%80%E5%BA%8F%E5%B9%95%E7%9A%84-setup"><span class="nav-number">3.1.</span> <span class="nav-text">1.æ‹‰å¼€åºå¹•çš„ setup</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#2-ref-%E5%87%BD%E6%95%B0"><span class="nav-number">3.2.</span> <span class="nav-text">2.ref å‡½æ•°</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#3-reactive-%E5%87%BD%E6%95%B0"><span class="nav-number">3.3.</span> <span class="nav-text">3.reactive å‡½æ•°</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#4-Vue3-0-%E4%B8%AD%E7%9A%84%E5%93%8D%E5%BA%94%E5%BC%8F%E5%8E%9F%E7%90%86"><span class="nav-number">3.4.</span> <span class="nav-text">4.Vue3.0 ä¸­çš„å“åº”å¼åŸç†</span></a><ol class="nav-child"><li class="nav-item nav-level-4"><a class="nav-link" href="#vue2-x-%E7%9A%84%E5%93%8D%E5%BA%94%E5%BC%8F"><span class="nav-number">3.4.1.</span> <span class="nav-text">vue2.x çš„å“åº”å¼</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#Vue3-0-%E7%9A%84%E5%93%8D%E5%BA%94%E5%BC%8F"><span class="nav-number">3.4.2.</span> <span class="nav-text">Vue3.0 çš„å“åº”å¼</span></a></li></ol></li><li class="nav-item nav-level-3"><a class="nav-link" href="#5-reactive-%E5%AF%B9%E6%AF%94-ref"><span class="nav-number">3.5.</span> <span class="nav-text">5.reactive å¯¹æ¯” ref</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#6-setup-%E7%9A%84%E4%B8%A4%E4%B8%AA%E6%B3%A8%E6%84%8F%E7%82%B9"><span class="nav-number">3.6.</span> <span class="nav-text">6.setup çš„ä¸¤ä¸ªæ³¨æ„ç‚¹</span></a></li></ol></li><li class="nav-item nav-level-2"><a class="nav-link" href="#%E5%85%B6%E5%AE%83-CompositionAPI"><span class="nav-number">4.</span> <span class="nav-text">å…¶å®ƒ CompositionAPI</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#shallowReactive-%E4%B8%8E-shallowRef"><span class="nav-number">4.1.</span> <span class="nav-text">shallowReactive ä¸ shallowRef</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#readonly-%E4%B8%8E-shallowReadonly"><span class="nav-number">4.2.</span> <span class="nav-text">readonly ä¸ shallowReadonly</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#toRaw-%E4%B8%8E-markRaw"><span class="nav-number">4.3.</span> <span class="nav-text">toRaw ä¸ markRaw</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#customRef"><span class="nav-number">4.4.</span> <span class="nav-text">customRef</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#provide-%E4%B8%8E-inject"><span class="nav-number">4.5.</span> <span class="nav-text">provide ä¸ inject</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#%E5%93%8D%E5%BA%94%E5%BC%8F%E6%95%B0%E6%8D%AE%E7%9A%84%E5%88%A4%E6%96%AD"><span class="nav-number">4.6.</span> <span class="nav-text">å“åº”å¼æ•°æ®çš„åˆ¤æ–­</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#getCurrentInstance"><span class="nav-number">4.7.</span> <span class="nav-text">getCurrentInstance</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#Composition-API-%E7%9A%84%E4%BC%98%E5%8A%BF"><span class="nav-number">4.8.</span> <span class="nav-text">Composition API çš„ä¼˜åŠ¿</span></a><ol class="nav-child"><li class="nav-item nav-level-4"><a class="nav-link" href="#Options-API-%E5%AD%98%E5%9C%A8%E7%9A%84%E9%97%AE%E9%A2%98"><span class="nav-number">4.8.1.</span> <span class="nav-text">Options API å­˜åœ¨çš„é—®é¢˜</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#Composition-API-%E7%9A%84%E4%BC%98%E5%8A%BF-1"><span class="nav-number">4.8.2.</span> <span class="nav-text">Composition API çš„ä¼˜åŠ¿</span></a></li></ol></li></ol></li><li class="nav-item nav-level-2"><a class="nav-link" href="#%E7%94%9F%E5%91%BD%E5%91%A8%E6%9C%9F"><span class="nav-number">5.</span> <span class="nav-text">ç”Ÿå‘½å‘¨æœŸ</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#toRef"><span class="nav-number">6.</span> <span class="nav-text">toRef</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#%E8%AE%A1%E7%AE%97%E5%B1%9E%E6%80%A7%E4%B8%8E%E7%9B%91%E8%A7%86"><span class="nav-number">7.</span> <span class="nav-text">è®¡ç®—å±æ€§ä¸ç›‘è§†</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#1-computed-%E5%87%BD%E6%95%B0"><span class="nav-number">7.1.</span> <span class="nav-text">1.computed å‡½æ•°</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#2-watch-%E5%87%BD%E6%95%B0"><span class="nav-number">7.2.</span> <span class="nav-text">2.watch å‡½æ•°</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#3-watchEffect-%E5%87%BD%E6%95%B0"><span class="nav-number">7.3.</span> <span class="nav-text">3.watchEffect å‡½æ•°</span></a></li></ol></li><li class="nav-item nav-level-2"><a class="nav-link" href="#%E5%85%B6%E4%BB%96%E5%8F%98%E5%8C%96"><span class="nav-number">8.</span> <span class="nav-text">å…¶ä»–å˜åŒ–</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#1-%E5%85%A8%E5%B1%80-API-%E7%9A%84%E8%BD%AC%E7%A7%BB"><span class="nav-number">8.1.</span> <span class="nav-text">1.å…¨å±€ API çš„è½¬ç§»</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#2-%E5%85%B6%E4%BB%96%E6%94%B9%E5%8F%98"><span class="nav-number">8.2.</span> <span class="nav-text">2.å…¶ä»–æ”¹å˜</span></a></li></ol></li><li class="nav-item nav-level-2"><a class="nav-link" href="#%E6%96%B0%E7%9A%84%E7%BB%84%E4%BB%B6"><span class="nav-number">9.</span> <span class="nav-text">æ–°çš„ç»„ä»¶</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#1-Fragment"><span class="nav-number">9.1.</span> <span class="nav-text">1.Fragment</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#2-Teleport"><span class="nav-number">9.2.</span> <span class="nav-text">2.Teleport</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#3-Suspense"><span class="nav-number">9.3.</span> <span class="nav-text">3.Suspense</span></a></li></ol></li></ol></div></div></div></div></main><script src="/blog/js/utils.js"></script><script src="/blog/js/header-shrink.js"></script><script src="/blog/js/back2top.js"></script><script src="/blog/js/toggle-theme.js"></script><script src="/blog/js/code-block.js"></script><script src="/blog/js/main.js"></script><script src="/blog/js/libs/anime.min.js"></script><script src="/blog/js/local-search.js"></script><script src="/blog/js/lazyload.js"></script><div class="pjax"><script src="/blog/js/post/post-helper.js"></script><script src="/blog/js/post/toc.js"></script><script src="/blog/js/post/copyright-info.js"></script><script src="/blog/js/post/share.js"></script></div><script src="/blog/js/libs/pjax.min.js"></script><script>window.addEventListener("DOMContentLoaded",()=>{window.pjax=new Pjax({selectors:["head title",".page-container",".pjax"],history:!0,debug:!1,cacheBust:!1,timeout:0,analytics:!1,currentUrlFullReload:!1,scrollRestoration:!1}),document.addEventListener("pjax:send",()=>{KEEP.utils.pjaxProgressBarStart()}),document.addEventListener("pjax:complete",()=>{KEEP.utils.pjaxProgressBarEnd(),window.pjax.executeScripts(document.querySelectorAll("script[data-pjax], .pjax script")),KEEP.initExecute()})})</script><script class="custom-inject-js" src="/blog/js/tongji.js" data-pjax></script></body></html>